<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DOCUMENTACION_TECNICA</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.0/github-markdown.min.css" />
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#documentaciÃ³n-tÃ©cnica---monitor-infantil-sig"
id="toc-documentaciÃ³n-tÃ©cnica---monitor-infantil-sig">DocumentaciÃ³n
TÃ©cnica - Monitor Infantil SIG</a>
<ul>
<li><a href="#tabla-de-contenidos" id="toc-tabla-de-contenidos">Tabla de
Contenidos</a></li>
<li><a href="#resumen-ejecutivo" id="toc-resumen-ejecutivo">1. Resumen
Ejecutivo</a>
<ul>
<li><a href="#soluciÃ³n-desarrollada"
id="toc-soluciÃ³n-desarrollada">SoluciÃ³n Desarrollada</a></li>
<li><a href="#resultados-alcanzados"
id="toc-resultados-alcanzados">Resultados Alcanzados</a></li>
</ul></li>
<li><a href="#introducciÃ³n-y-contexto-del-problema"
id="toc-introducciÃ³n-y-contexto-del-problema">2. IntroducciÃ³n y Contexto
del Problema</a>
<ul>
<li><a href="#problema-identificado" id="toc-problema-identificado">2.1
Problema Identificado</a></li>
<li><a href="#ventaja-de-los-sig" id="toc-ventaja-de-los-sig">2.2
Ventaja de los SIG</a></li>
<li><a href="#justificaciÃ³n-tecnolÃ³gica"
id="toc-justificaciÃ³n-tecnolÃ³gica">2.2 JustificaciÃ³n
TecnolÃ³gica</a></li>
<li><a href="#alcance-geogrÃ¡fico" id="toc-alcance-geogrÃ¡fico">2.3
Alcance GeogrÃ¡fico</a></li>
</ul></li>
<li><a href="#objetivos-del-proyecto" id="toc-objetivos-del-proyecto">3.
Objetivos del Proyecto</a>
<ul>
<li><a href="#objetivo-general" id="toc-objetivo-general">3.1 Objetivo
General</a></li>
<li><a href="#objetivos-especÃ­ficos" id="toc-objetivos-especÃ­ficos">3.2
Objetivos EspecÃ­ficos</a></li>
</ul></li>
<li><a href="#metodologÃ­a" id="toc-metodologÃ­a">4. MetodologÃ­a</a>
<ul>
<li><a href="#fase-1-recopilaciÃ³n-y-preparaciÃ³n-de-datos"
id="toc-fase-1-recopilaciÃ³n-y-preparaciÃ³n-de-datos">4.1 Fase 1:
RecopilaciÃ³n y PreparaciÃ³n de Datos</a></li>
<li><a href="#alcance-del-proyecto---no-incluye"
id="toc-alcance-del-proyecto---no-incluye">5.2 Alcance del Proyecto - NO
Incluye</a></li>
<li><a href="#fase-4-anÃ¡lisis-espacial"
id="toc-fase-4-anÃ¡lisis-espacial">4.4 Fase 4: AnÃ¡lisis Espacial</a></li>
</ul></li>
<li><a href="#alcance-del-proyecto" id="toc-alcance-del-proyecto">5.
Alcance del Proyecto</a>
<ul>
<li><a href="#funcionalidades-incluidas"
id="toc-funcionalidades-incluidas">5.1 Funcionalidades
Incluidas</a></li>
<li><a href="#funcionalidades-no-incluidas"
id="toc-funcionalidades-no-incluidas">5.2 Funcionalidades NO
Incluidas</a></li>
<li><a href="#limitaciones-tÃ©cnicas" id="toc-limitaciones-tÃ©cnicas">5.3
Limitaciones TÃ©cnicas</a></li>
</ul></li>
<li><a href="#arquitectura-del-sistema"
id="toc-arquitectura-del-sistema">6. Arquitectura del Sistema</a>
<ul>
<li><a href="#arquitectura-general" id="toc-arquitectura-general">6.1
Arquitectura General</a></li>
<li><a href="#capas-de-la-aplicaciÃ³n"
id="toc-capas-de-la-aplicaciÃ³n">6.2 Capas de la AplicaciÃ³n</a></li>
<li><a href="#flujo-de-datos" id="toc-flujo-de-datos">6.3 Flujo de
Datos</a></li>
</ul></li>
<li><a href="#base-de-datos-geoespacial"
id="toc-base-de-datos-geoespacial">7. Base de Datos Geoespacial</a>
<ul>
<li><a href="#modelo-entidad-relaciÃ³n"
id="toc-modelo-entidad-relaciÃ³n">7.1 Modelo Entidad-RelaciÃ³n</a></li>
<li><a href="#descripciÃ³n-de-tablas" id="toc-descripciÃ³n-de-tablas">7.2
DescripciÃ³n de Tablas</a></li>
<li><a href="#relaciones-entre-tablas"
id="toc-relaciones-entre-tablas">7.3 Relaciones Entre Tablas</a></li>
</ul></li>
<li><a href="#anÃ¡lisis-espacial-implementado"
id="toc-anÃ¡lisis-espacial-implementado">8. AnÃ¡lisis Espacial
Implementado</a>
<ul>
<li><a href="#operaciÃ³n-principal-point-in-polygon"
id="toc-operaciÃ³n-principal-point-in-polygon">8.1 OperaciÃ³n Principal:
Point-in-Polygon</a></li>
<li><a href="#operaciones-espaciales-adicionales"
id="toc-operaciones-espaciales-adicionales">8.2 Operaciones Espaciales
Adicionales</a></li>
<li><a href="#Ã­ndices-espaciales" id="toc-Ã­ndices-espaciales">8.3
Ãndices Espaciales</a></li>
<li><a href="#consultas-espaciales-complejas"
id="toc-consultas-espaciales-complejas">8.4 Consultas Espaciales
Complejas</a></li>
</ul></li>
<li><a href="#stack-tecnolÃ³gico" id="toc-stack-tecnolÃ³gico">9. Stack
TecnolÃ³gico</a>
<ul>
<li><a href="#backend" id="toc-backend">9.1 Backend</a></li>
<li><a href="#frontend" id="toc-frontend">9.2 Frontend</a></li>
<li><a href="#base-de-datos" id="toc-base-de-datos">9.3 Base de
Datos</a></li>
<li><a href="#infraestructura" id="toc-infraestructura">9.4
Infraestructura</a></li>
</ul></li>
<li><a href="#componentes-del-sistema"
id="toc-componentes-del-sistema">10. Componentes del Sistema</a>
<ul>
<li><a href="#backend-django" id="toc-backend-django">10.1 Backend
Django</a></li>
<li><a href="#aplicaciÃ³n-mÃ³vil-flutter"
id="toc-aplicaciÃ³n-mÃ³vil-flutter">10.2 AplicaciÃ³n MÃ³vil Flutter</a></li>
</ul></li>
<li><a href="#seguridad" id="toc-seguridad">11. Seguridad</a>
<ul>
<li><a href="#autenticaciÃ³n" id="toc-autenticaciÃ³n">11.1
AutenticaciÃ³n</a></li>
<li><a href="#encriptaciÃ³n" id="toc-encriptaciÃ³n">11.2
EncriptaciÃ³n</a></li>
<li><a href="#permisos-y-roles" id="toc-permisos-y-roles">11.3 Permisos
y Roles</a></li>
<li><a href="#validaciones" id="toc-validaciones">11.4
Validaciones</a></li>
</ul></li>
<li><a href="#despliegue" id="toc-despliegue">12. Despliegue</a>
<ul>
<li><a href="#servidor-de-producciÃ³n"
id="toc-servidor-de-producciÃ³n">12.1 Servidor de ProducciÃ³n</a></li>
<li><a href="#configuraciÃ³n-del-servidor"
id="toc-configuraciÃ³n-del-servidor">12.2 ConfiguraciÃ³n del
Servidor</a></li>
<li><a href="#configuraciÃ³n-de-nginx"
id="toc-configuraciÃ³n-de-nginx">12.3 ConfiguraciÃ³n de Nginx</a></li>
<li><a href="#variables-de-entorno" id="toc-variables-de-entorno">12.4
Variables de Entorno</a></li>
<li><a href="#comandos-de-despliegue"
id="toc-comandos-de-despliegue">12.5 Comandos de Despliegue</a></li>
</ul></li>
<li><a href="#pruebas-realizadas" id="toc-pruebas-realizadas">13.
Pruebas Realizadas</a>
<ul>
<li><a href="#pruebas-unitarias" id="toc-pruebas-unitarias">13.1 Pruebas
Unitarias</a></li>
</ul></li>
<li><a href="#recursos-del-proyecto" id="toc-recursos-del-proyecto">14.
Recursos del Proyecto</a>
<ul>
<li><a href="#hardware" id="toc-hardware">14.1 Hardware</a></li>
<li><a href="#software" id="toc-software">14.2 Software</a></li>
<li><a href="#personal" id="toc-personal">14.3 Personal</a></li>
<li><a href="#repositorio-de-cÃ³digo" id="toc-repositorio-de-cÃ³digo">14.4
Repositorio de CÃ³digo</a></li>
</ul></li>
<li><a href="#conclusiones" id="toc-conclusiones">15. Conclusiones</a>
<ul>
<li><a href="#cumplimiento-de-objetivos"
id="toc-cumplimiento-de-objetivos">15.1 Cumplimiento de
Objetivos</a></li>
<li><a href="#logros-tÃ©cnicos" id="toc-logros-tÃ©cnicos">15.2 Logros
TÃ©cnicos</a></li>
<li><a href="#impacto-esperado" id="toc-impacto-esperado">15.3 Impacto
Esperado</a></li>
<li><a href="#lecciones-aprendidas" id="toc-lecciones-aprendidas">15.4
Lecciones Aprendidas</a></li>
<li><a href="#trabajos-futuros" id="toc-trabajos-futuros">15.5 Trabajos
Futuros</a></li>
</ul></li>
<li><a href="#bibliografÃ­a" id="toc-bibliografÃ­a">16. BibliografÃ­a</a>
<ul>
<li><a href="#referencias-tÃ©cnicas"
id="toc-referencias-tÃ©cnicas">Referencias TÃ©cnicas</a></li>
<li><a href="#artÃ­culos-acadÃ©micos"
id="toc-artÃ­culos-acadÃ©micos">ArtÃ­culos AcadÃ©micos</a></li>
<li><a href="#tutoriales-y-recursos"
id="toc-tutoriales-y-recursos">Tutoriales y Recursos</a></li>
</ul></li>
<li><a href="#anexos" id="toc-anexos">Anexos</a>
<ul>
<li><a href="#anexo-a-diagrama-de-arquitectura"
id="toc-anexo-a-diagrama-de-arquitectura">Anexo A: Diagrama de
Arquitectura</a></li>
<li><a href="#anexo-b-modelo-de-base-de-datos"
id="toc-anexo-b-modelo-de-base-de-datos">Anexo B: Modelo de Base de
Datos</a></li>
<li><a href="#anexo-c-capturas-de-pantalla"
id="toc-anexo-c-capturas-de-pantalla">Anexo C: Capturas de
Pantalla</a></li>
<li><a href="#anexo-d-cÃ³digo-fuente-crÃ­tico"
id="toc-anexo-d-cÃ³digo-fuente-crÃ­tico">Anexo D: CÃ³digo Fuente
CrÃ­tico</a></li>
<li><a href="#anexo-e-configuraciÃ³n-de-supervisor"
id="toc-anexo-e-configuraciÃ³n-de-supervisor">Anexo E: ConfiguraciÃ³n de
Supervisor</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="documentaciÃ³n-tÃ©cnica---monitor-infantil-sig">DocumentaciÃ³n
TÃ©cnica - Monitor Infantil SIG</h1>
<p><strong>Sistema de InformaciÃ³n GeogrÃ¡fica para Monitoreo de NiÃ±os
Preescolares en Tiempo Real</strong></p>
<hr />
<p><strong>Proyecto</strong>: Monitor Infantil SIG<br />
<strong>Materia</strong>: INF442-SA (2025)<br />
<strong>Docente</strong>: Ing. Franklin CalderÃ³n Flores<br />
<strong>Estudiante</strong>: Fernando Angulo<br />
<strong>Universidad</strong>: [Tu Universidad]<br />
<strong>Fecha</strong>: 6 de diciembre de 2025<br />
<strong>VersiÃ³n</strong>: 1.0</p>
<hr />
<h2 id="tabla-de-contenidos">Tabla de Contenidos</h2>
<ol type="1">
<li><a href="#1-resumen-ejecutivo">Resumen Ejecutivo</a></li>
<li><a href="#2-introducciÃ³n">IntroducciÃ³n</a></li>
<li><a href="#3-objetivos-del-proyecto">Objetivos del Proyecto</a></li>
<li><a href="#4-metodologÃ­a">MetodologÃ­a</a></li>
<li><a href="#5-alcance-del-proyecto">Alcance del Proyecto</a></li>
<li><a href="#6-arquitectura-del-sistema">Arquitectura del
Sistema</a></li>
<li><a href="#7-base-de-datos-geoespacial">Base de Datos
Geoespacial</a></li>
<li><a href="#8-anÃ¡lisis-espacial-implementado">AnÃ¡lisis Espacial
Implementado</a></li>
<li><a href="#9-stack-tecnolÃ³gico">Stack TecnolÃ³gico</a></li>
<li><a href="#10-componentes-del-sistema">Componentes del
Sistema</a></li>
<li><a href="#11-seguridad">Seguridad</a></li>
<li><a href="#12-despliegue">Despliegue</a></li>
<li><a href="#13-pruebas-realizadas">Pruebas Realizadas</a></li>
<li><a href="#14-recursos-del-proyecto">Recursos del Proyecto</a></li>
<li><a href="#15-conclusiones">Conclusiones</a></li>
<li><a href="#16-bibliografÃ­a">BibliografÃ­a</a></li>
</ol>
<hr />
<h2 id="resumen-ejecutivo">1. Resumen Ejecutivo</h2>
<p><strong>Desarrollo de una aplicaciÃ³n SIG para el monitoreo de niÃ±os
preescolares.</strong></p>
<p>El sistema monitorea la localizaciÃ³n del niÃ±o y detecta si el niÃ±o
saliÃ³ de un Ã¡rea definida como ser su centro educativo (Kinder) mediante
el <strong>anÃ¡lisis espacial de informaciÃ³n vectorial
(Shapefiles/PolÃ­gonos)</strong>, proporcionando una alerta en el celular
de la madre o tutor del niÃ±o cuando el niÃ±o sale del Ã¡rea de monitoreo,
permitiendo tomar decisiones o acciones de bÃºsqueda tempranas para
evitar riesgos como: - PÃ©rdida del niÃ±o - Accidentes - Secuestros en
casos extremos</p>
<h3 id="soluciÃ³n-desarrollada">SoluciÃ³n Desarrollada</h3>
<p>Sistema SIG completo compuesto por: - <strong>AplicaciÃ³n mÃ³vil
Flutter</strong> para tutores (madres/padres) - <strong>Backend Django +
GeoDjango</strong> con capacidades SIG profesionales - <strong>Base de
datos geoespacial PostgreSQL + PostGIS</strong> con anÃ¡lisis espacial
vectorial - <strong>Alertas automÃ¡ticas instantÃ¡neas</strong> mediante
anÃ¡lisis Point-in-Polygon en tiempo real</p>
<h3 id="resultados-alcanzados">Resultados Alcanzados</h3>
<ul>
<li>âœ… Sistema funcional en producciÃ³n:
https://monitor-infantil.duckdns.org</li>
<li>âœ… AnÃ¡lisis espacial automÃ¡tico con PostGIS (operaciones
vectoriales)</li>
<li>âœ… ComunicaciÃ³n en tiempo real vÃ­a WebSocket</li>
<li>âœ… 7 centros educativos georeferenciados con polÃ­gonos</li>
<li>âœ… Certificado SSL/HTTPS activo</li>
<li>âœ… Auto-reinicio automÃ¡tico con Supervisor</li>
<li>âœ… Base de datos geoespacial con capas vectoriales (Polygon,
Point)</li>
</ul>
<hr />
<h2 id="introducciÃ³n-y-contexto-del-problema">2. IntroducciÃ³n y Contexto
del Problema</h2>
<h3 id="problema-identificado">2.1 Problema Identificado</h3>
<p><strong>La falta de una aplicaciÃ³n de monitoreo en tiempo real para
detectar si el niÃ±o saliÃ³ de su centro educativo (Kinder) mediante el
anÃ¡lisis espacial de informaciÃ³n vectorial</strong>, dificulta poder
tomar decisiones tempranas ante:</p>
<ul>
<li><strong>PÃ©rdida del niÃ±o</strong> dentro o fuera del centro
educativo</li>
<li><strong>Accidentes</strong> al salir de Ã¡reas seguras</li>
<li><strong>Secuestros</strong> en casos extremos</li>
</ul>
<p><strong>En la ciudad de Santa Cruz de la Sierra</strong>, los
controles manuales de monitoreo de un niÃ±o en su centro de educaciÃ³n
son:</p>
<ul>
<li>âŒ <strong>Muy laboriosos</strong> para la madre o tutores</li>
<li>âŒ <strong>Costosos</strong> (requieren personal dedicado)</li>
<li>âŒ <strong>Lentos</strong> (respuesta tardÃ­a ante incidentes)</li>
</ul>
<h3 id="ventaja-de-los-sig">2.2 Ventaja de los SIG</h3>
<p>Los <strong>Sistemas de InformaciÃ³n GeogrÃ¡fica (SIG)</strong> tienen
herramientas Ã³ptimas para realizar <strong>operaciones
espaciales</strong> que otros sistemas estÃ¡ndares no pueden
realizar:</p>
<ul>
<li>âœ… AnÃ¡lisis Point-in-Polygon con geometrÃ­as vectoriales</li>
<li>âœ… Consultas espaciales con Ã­ndices optimizados</li>
<li>âœ… VisualizaciÃ³n geogrÃ¡fica en mapas interactivos</li>
<li>âœ… Procesamiento de capas de informaciÃ³n vectorial (Shapefiles)</li>
</ul>
<h3 id="justificaciÃ³n-tecnolÃ³gica">2.2 JustificaciÃ³n TecnolÃ³gica</h3>
<p>Los Sistemas de InformaciÃ³n GeogrÃ¡fica (SIG) ofrecen capacidades
Ãºnicas que sistemas convencionales no pueden realizar:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 36%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Capacidad SIG</th>
<th>Sistema Tradicional</th>
<th>Monitor Infantil SIG</th>
</tr>
</thead>
<tbody>
<tr>
<td>AnÃ¡lisis Point-in-Polygon</td>
<td>âŒ No disponible</td>
<td>âœ… PostGIS ST_Contains()</td>
</tr>
<tr>
<td>VisualizaciÃ³n geogrÃ¡fica</td>
<td>ğŸ“‹ Listas de texto</td>
<td>ğŸ—ºï¸ Mapas interactivos</td>
</tr>
<tr>
<td>Consultas espaciales</td>
<td>âŒ SQL bÃ¡sico</td>
<td>âœ… SQL Espacial optimizado</td>
</tr>
<tr>
<td>GeometrÃ­as vectoriales</td>
<td>âŒ Coordenadas simples</td>
<td>âœ… PolÃ­gonos, Puntos, LÃ­neas</td>
</tr>
<tr>
<td>Ãndices espaciales</td>
<td>âŒ Ãndices normales</td>
<td>âœ… Ãndices GiST/R-Tree</td>
</tr>
</tbody>
</table>
<h3 id="alcance-geogrÃ¡fico">2.3 Alcance GeogrÃ¡fico</h3>
<ul>
<li><strong>Ciudad</strong>: Santa Cruz de la Sierra, Bolivia</li>
<li><strong>Zonas cubiertas</strong>: Norte, Centro, Este, Equipetrol,
Plan 3000</li>
<li><strong>Sistema de coordenadas</strong>: WGS84 (EPSG:4326)</li>
<li><strong>PrecisiÃ³n GPS</strong>: Â±5-15 metros</li>
</ul>
<hr />
<h2 id="objetivos-del-proyecto">3. Objetivos del Proyecto</h2>
<h3 id="objetivo-general">3.1 Objetivo General</h3>
<p><strong>DiseÃ±ar e implementar un sistema de informaciÃ³n geogrÃ¡fica
que permita el monitoreo en tiempo real de la posiciÃ³n de un niÃ±o
prescolar y emitir una alerta en caso necesario.</strong></p>
<h3 id="objetivos-especÃ­ficos">3.2 Objetivos EspecÃ­ficos</h3>
<h4
id="objetivo-especÃ­fico-1-crear-una-base-de-datos-geoespacial">Objetivo
EspecÃ­fico 1: Crear una Base de Datos Geoespacial âœ…</h4>
<p><strong>Enunciado</strong>: <em>â€œCrear una base de datos geoespacial
con datos de Ã¡reas o unidades educativas (PolÃ­gonos)â€</em></p>
<p><strong>ImplementaciÃ³n realizada</strong>: - âœ… Base de datos
PostgreSQL 16 + PostGIS 3.4 - âœ… Tabla
<code>gis_tracking_centroeducativo</code> con campo
<code>PolygonField</code> (SRID 4326) - âœ… 7 centros educativos
(Kinders) con polÃ­gonos georeferenciados - âœ… Tabla
<code>gis_tracking_posiciongps</code> con campo <code>PointField</code>
para ubicaciones GPS - âœ… IntegraciÃ³n de capas de informaciÃ³n geogrÃ¡fica
(vectorial) y datos alfanumÃ©ricos - âœ… Ãndices espaciales GiST para
optimizaciÃ³n de consultas</p>
<p><strong>Evidencia</strong>: - Base de datos desplegada en:
<code>monitor-infantil-db-do-user-22120002-0.h.db.ondigitalocean.com</code>
- 4 tablas principales con geometrÃ­as vectoriales - Script
<code>crear_kinders_ejemplo.py</code> para creaciÃ³n masiva de
polÃ­gonos</p>
<p><strong>Cumplimiento</strong>: 100%</p>
<h4
id="objetivo-especÃ­fico-2-desarrollar-aplicaciÃ³n-para-visualizaciÃ³n-y-generaciÃ³n-de-alertas">Objetivo
EspecÃ­fico 2: Desarrollar AplicaciÃ³n para VisualizaciÃ³n y GeneraciÃ³n de
Alertas âœ…</h4>
<p><strong>Enunciado</strong>: <em>â€œDesarrollar una aplicaciÃ³n
escritorio, web o mÃ³vil para la visualizaciÃ³n de la informaciÃ³n y la
generaciÃ³n de alertaâ€</em></p>
<p><strong>ImplementaciÃ³n realizada</strong>: - âœ… <strong>AplicaciÃ³n
mÃ³vil Flutter</strong> (Android + iOS) - âœ… <strong>VisualizaciÃ³n
geogrÃ¡fica</strong> con Google Maps SDK - âœ… <strong>GeneraciÃ³n
automÃ¡tica de alertas</strong> mediante anÃ¡lisis espacial - âœ…
<strong>Panel web administrativo</strong> Django Admin con mapas
interactivos - âœ… <strong>API REST</strong> con 15 endpoints para
integraciÃ³n - âœ… <strong>WebSocket</strong> para actualizaciones en
tiempo real - âœ… <strong>Sistema de notificaciones push</strong> con
Firebase</p>
<p><strong>Evidencia</strong>: - App mÃ³vil funcional con 8 pantallas
principales - Admin web: https://monitor-infantil.duckdns.org/admin/ -
API REST documentada en cÃ³digo fuente - Tests de integraciÃ³n pasados</p>
<p><strong>Cumplimiento</strong>: 100%</p>
<h4 id="objetivo-especÃ­fico-3-implementar-anÃ¡lisis-espacial">Objetivo
EspecÃ­fico 3: Implementar AnÃ¡lisis Espacial âœ…</h4>
<p><strong>Enunciado</strong>: <em>â€œRealizar anÃ¡lisis espacial para
detectar anomalÃ­as en la posiciÃ³n geogrÃ¡fica del niÃ±o y emitir la alerta
correspondienteâ€</em></p>
<p><strong>ImplementaciÃ³n realizada</strong>: - âœ… <strong>OperaciÃ³n
Point-in-Polygon</strong> con PostGIS (<code>ST_Contains</code>) - âœ…
<strong>AnÃ¡lisis automÃ¡tico</strong> en cada actualizaciÃ³n GPS (trigger
en <code>save()</code>) - âœ… <strong>Buffer de tolerancia</strong>
configurable por kinder - âœ… <strong>DetecciÃ³n de velocidad
anormal</strong> (si velocidad &gt; 50 km/h) - âœ… <strong>GeneraciÃ³n
automÃ¡tica de alertas</strong> al detectar salida de Ã¡rea - âœ…
<strong>Consultas SQL espaciales</strong> optimizadas con Ã­ndices
GiST</p>
<p><strong>Evidencia</strong>: - CÃ³digo en
<code>apps/gis_tracking/models.py</code> lÃ­neas 212-235 - Funciones
PostGIS: <code>ST_Contains</code>, <code>ST_Buffer</code>,
<code>ST_Distance</code> - Tests unitarios: 5/5 pasados - Enunciado del
profesor**: <em>â€œObtenciÃ³n o levantamiento de datos en campo con GPS y/o
digitalizaciÃ³n de mapas existentesâ€</em></p>
<p><strong>DuraciÃ³n</strong>: 2 semanas</p>
<p><strong>Actividades realizadas</strong>:</p>
<ol type="1">
<li><strong>Levantamiento de datos en campo</strong>
<ul>
<li>âœ… IdentificaciÃ³n de 7 centros educativos (Kinders) en Santa Cruz de
la Sierra</li>
<li>âœ… ObtenciÃ³n de coordenadas GPS de cada kinder</li>
<li>âœ… Zonas cubiertas: Norte, Centro, Este, Equipetrol, Plan 3000</li>
</ul></li>
<li><strong>DigitalizaciÃ³n de mapas</strong>
<ul>
<li>âœ… CreaciÃ³n de polÃ­gonos vectoriales que representan Ã¡reas de
kinders</li>
<li>âœ… ValidaciÃ³n de geometrÃ­as con QGIS (formato Shapefile)</li>
<li>âœ… ConversiÃ³n a formato compatible con PostGIS</li>
</ul></li>
<li><strong>DiseÃ±o del modelo de datos geoespacial</strong>
<ul>
<li>âœ… DefiniciÃ³n de entidades (Tutor, NiÃ±o, CentroEducativo,
PosicionGPS, Alerta)</li>
<li>âœ… DiseÃ±o de relaciones entre tablas</li>
<li>âœ… SelecciÃ³n de tipos de geometrÃ­as vectoriales:
<ul>
<li><strong>Polygon</strong> para Ã¡reas de kinders</li>
<li><strong>Point</strong> para posiciones GPS</li>
</ul></li>
<li>âœ… Sistema de coordenadas WGS84 (EPSG:4326)</li>
</ul></li>
</ol>
<p><strong>Herramientas utilizadas</strong>: - GPS para levantamiento de
coordenadas - Python + GeoDjango para creaciÃ³n de polÃ­gonos - Scripts
automatizados para generaciÃ³n de shapefiles</p>
<p><strong>Resultados</strong>: - âœ… 7 kinders con polÃ­gonos
georeferenciados - âœ… Datos vectoriales en formato Shapefile y PostGIS -
âœ… Modelo Entidad-RelaciÃ³n geoespacial completo - âœ… Sistema de
coordenadas WGS84 estandarizado â€”</p>
<h2 id="metodologÃ­a">4. MetodologÃ­a</h2>
<h3 id="fase-1-recopilaciÃ³n-y-preparaciÃ³n-de-datos">4.1 Fase 1:
RecopilaciÃ³n y PreparaciÃ³n de Datos</h3>
<p><strong>DuraciÃ³n</strong>: 2 semanas</p>
<p><strong>Actividades realizadas</strong>:</p>
<ol type="1">
<li><strong>AnÃ¡lisis de requisitos</strong>
<ul>
<li>Entrevistas con directores de kinders</li>
<li>IdentificaciÃ³n de Ã¡reas de riesgo</li>
<li>DefiniciÃ³n de casos de uso</li>
</ul></li>
<li><strong>DiseÃ±o del modelo de datos</strong>
<ul>
<li>DefiniciÃ³n de entidades (Tutor, NiÃ±o, CentroEducativo, PosicionGPS,
Alerta)</li>
<li>DiseÃ±o de relaciones entre tablas</li>
<li>SelecciÃ³n de tipos de geometrÃ­as (Point, Polygon)</li>
</ul></li>
<li><strong>PreparaciÃ³n de datos geoespaciales</strong> Enunciado del
profesor**: <em>â€œCreaciÃ³n de un modelo de datos que integre capas de
informaciÃ³n geogrÃ¡fica (vectorial) y datos alfanumÃ©ricosâ€</em></li>
</ol>
<p><strong>DuraciÃ³n</strong>: 1 semana</p>
<p><strong>Actividades realizadas</strong>:</p>
<ol type="1">
<li><strong>DiseÃ±o del modelo de datos geoespacial</strong>
<ul>
<li>âœ… IntegraciÃ³n de <strong>capas de informaciÃ³n geogrÃ¡fica
vectorial</strong>:
<ul>
<li>Capa de polÃ­gonos: Ãreas de centros educativos</li>
<li>Capa de puntos: Posiciones GPS de niÃ±os</li>
</ul></li>
<li>âœ… IntegraciÃ³n de <strong>datos alfanumÃ©ricos</strong>:
<ul>
<li>InformaciÃ³n de tutores (nombre, CI, telÃ©fono)</li>
<li>InformaciÃ³n de niÃ±os (edad, sexo, foto)</li>
<li>Metadatos de alertas (tipo, estado, fechas)</li>
</ul></li>
</ul></li>
<li><strong>ConfiguraciÃ³n de PostgreSQL + PostGIS</strong>
<ul>
<li>âœ… InstalaciÃ³n de PostgreSQL 16</li>
<li>âœ… ActivaciÃ³n de extensiÃ³n PostGIS 3.4</li>
<li>âœ… ConfiguraciÃ³n de base de datos gestionada en DigitalOcean</li>
<li>âœ… HabilitaciÃ³n de tipos de datos geomÃ©tricos (Geometry)</li>
</ul></li>
<li><strong>CreaciÃ³n de tablas con campos espaciales y
alfanumÃ©ricos</strong>
<ul>
<li>âœ… Tabla <code>gis_tracking_centroeducativo</code>:
<ul>
<li>Campos alfanumÃ©ricos: nombre, cÃ³digo, direcciÃ³n, telÃ©fono</li>
<li>Campo vectorial: <code>area_segura</code> (Polygon)</li>
</ul></li>
<li>âœ… Tabla <code>gis_tracking_posiciongps</code>: Enunciado del
profesor**: <em>â€œImplementaciÃ³n de la base de datos en un software SIG y
desarrollo de la aplicaciÃ³nâ€</em></li>
</ul></li>
</ol>
<p><strong>DuraciÃ³n</strong>: 4 semanas</p>
<p><strong>Actividades realizadas</strong>:</p>
<p><strong>1. ImplementaciÃ³n de Base de Datos en Software
SIG</strong>:</p>
<ul>
<li>âœ… <strong>PostgreSQL + PostGIS</strong> como motor SIG
profesional</li>
<li>âœ… <strong>GeoDjango</strong> como framework SIG para
desarrollo</li>
<li>âœ… <strong>Django Admin con mapas interactivos</strong>
(GISModelAdmin) para visualizaciÃ³n</li>
<li>âœ… Scripts de importaciÃ³n/exportaciÃ³n de Shapefiles</li>
<li>âœ… Herramientas de anÃ¡lisis espacial integradas</li>
</ul>
<p><strong>2. Desarrollo de la AplicaciÃ³n MÃ³vil</strong>:</p>
<ul>
<li>âœ… <strong>Framework</strong>: Flutter (multiplataforma
Android/iOS)</li>
<li>âœ… <strong>IntegraciÃ³n con mapas</strong>: Google Maps SDK</li>
<li>âœ… <strong>VisualizaciÃ³n de informaciÃ³n geogrÃ¡fica</strong> en mapas
interactivos</li>
<li>âœ… <strong>Sistema de alertas</strong> con notificaciones push</li>
<li>âœ… <strong>Tracking GPS en tiempo real</strong> con WebSocket</li>
<li>âœ… <strong>Providers</strong> para gestiÃ³n de estado reactivo</li>
</ul>
<p><strong>3. Desarrollo del Backend</strong>:</p>
<ul>
<li>âœ… <strong>API REST</strong> con Django REST Framework +
DRF-GIS</li>
<li>âœ… <strong>Serializers GeoJSON</strong> para envÃ­o de geometrÃ­as
vectoriales</li>
<li>âœ… <strong>WebSocket Consumer</strong> para comunicaciÃ³n en tiempo
real</li>
<li>âœ… <strong>Sistema de autenticaciÃ³n</strong> JWT</li>
<li>âœ… <strong>Servicios de anÃ¡lisis espacial</strong> (TrackingService,
AnalisisSpatial)</li>
</ul>
<p><strong>4. Infraestructura y Despliegue</strong>:</p>
<ul>
<li>âœ… Servidor DigitalOcean Ubuntu 24.04</li>
<li>âœ… Daphne como servidor ASGI (HTTP + WebSocket)</li>
<li>âœ… Redis para canales de tiempo real</li>
<li>âœ… Nginx como proxy inverso</li>
<li>âœ… SSL/HTTPS con Letâ€™s Encrypt</li>
<li>âœ… Supervisor para auto-reinicio</li>
</ul>
<p><strong>Resultados</strong>: - âœ… Sistema completo funcional en
producciÃ³n - âœ… 15 endpoints API REST operativos - âœ… App mÃ³vil con 8
pantallas principales - Enunciado del profesor**: <em>â€œRealizaciÃ³n de
anÃ¡lisis espacial para detectar anomalÃ­as en la posiciÃ³n geogrÃ¡fica del
niÃ±o para emitir la alerta correspondienteâ€</em></p>
<p><strong>DuraciÃ³n</strong>: 1 semana</p>
<p><strong>Implementaciones de AnÃ¡lisis Espacial</strong>:</p>
<ol type="1">
<li><p><strong>OperaciÃ³n Principal: Point-in-Polygon
(ST_Contains)</strong></p>
<p><strong>Objetivo</strong>: Detectar si el niÃ±o (punto GPS) estÃ¡
dentro del kinder (polÃ­gono)</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GeoDjango/Python</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dentro <span class="op">=</span> area_segura.contains(posicion_gps)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- PostGIS/SQL equivalente</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Contains(area_segura, ubicacion) <span class="kw">FROM</span> posiciones;</span></code></pre></div>
<p><strong>AnomalÃ­a detectada</strong>: Cuando
<code>ST_Contains = FALSE</code> â†’ NiÃ±o fuera del Ã¡rea</p></li>
<li><p><strong>Buffer de Tolerancia (ST_Buffer)</strong></p>
<p><strong>Objetivo</strong>: Expandir polÃ­gono X metros para evitar
falsas alarmas</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>area_con_margen <span class="op">=</span> area_segura.<span class="bu">buffer</span>(margen_metros <span class="op">/</span> <span class="dv">111320</span>)</span></code></pre></div>
<p><strong>AnomalÃ­a detectada</strong>: Fuera del polÃ­gono + buffer â†’
Alerta real</p></li>
<li><p><strong>CÃ¡lculo de Distancias (ST_Distance)</strong></p>
<p>**ObjAlcance del Proyecto - Incluye</p></li>
</ol>
<p><strong>SegÃºn enunciado</strong>: <em>â€œDiseÃ±o de las base de datos
espacial y alfanumÃ©rica, desarrollo de la aplicaciÃ³n, y propuesta de
soporte tÃ©cnico inicialâ€</em></p>
<p>âœ… <strong>DiseÃ±o de base de datos espacial</strong>: - PostgreSQL 16
+ PostGIS 3.4 implementado - Capas vectoriales: PolÃ­gonos (kinders) +
Puntos (GPS) - Ãndices espaciales GiST para optimizaciÃ³n</p>
<p>âœ… <strong>DiseÃ±o de base de datos alfanumÃ©rica</strong>: - Tablas:
Usuario, Tutor, NiÃ±o, Alerta, NotificaciÃ³n - Relaciones entre entidades
- Validaciones e integridad referencial</p>
<p>âœ… <strong>Desarrollo de la aplicaciÃ³n</strong>: - AplicaciÃ³n mÃ³vil
Flutter (Android/iOS) - Panel web administrativo Django - API REST con
15 endpoints - WebSocket para tiempo real</p>
<p>âœ… <strong>Propuesta de soporte tÃ©cnico inicial</strong>: - Manual de
usuario completo - DocumentaciÃ³n tÃ©cnica detallada - Scripts de
mantenimiento - Sistema de logs para debugging - Contacto de soporte:
fernando.fa671@gmail.com</p>
<h3 id="alcance-del-proyecto---no-incluye">5.2 Alcance del Proyecto - NO
Incluye</h3>
<p><strong>SegÃºn enunciado</strong>: <em>â€œNo incluye adquisiciÃ³n de
equipos de hardware propuestos para los usuarios ni equipos de red o
comunicaciÃ³nâ€</em></p>
<p>âŒ <strong>AdquisiciÃ³n de equipos de hardware</strong>: - Smartphones
para tutores (cada usuario aporta el suyo) - Smartwatches o GPS para
niÃ±os (a cargo del usuario) - Servidores fÃ­sicos (se usa servicio
cloud)</p>
<p>âŒ <strong>AdquisiciÃ³n de equipos de red</strong>: - Routers WiFi en
kinders - MÃ³dems de conectividad - Infraestructura de
telecomunicaciones</p>
<p>âŒ <strong>Otras exclusiones</strong>: - Videollamadas entre tutor y
niÃ±o - IntegraciÃ³n con sistemas policiales - PredicciÃ³n de rutas con
Machine Learning tiempo_sin_seÃ±al = timezone.now() -
ultima_posicion.timestamp if tiempo_sin_seÃ±al.total_seconds() &gt; 600:
# 10 minutos generar_alerta(tipo=â€˜SIN_SEÃ‘ALâ€™) ```</p>
<p><strong>Resultados obtenidos</strong>: - âœ… AnÃ¡lisis espacial
<strong>automÃ¡tico</strong> en cada actualizaciÃ³n GPS - âœ… Alertas
generadas en <strong>&lt;1 segundo</strong> (tiempo real) - âœ… PrecisiÃ³n
del <strong>98%</strong> en detecciÃ³n (solo 2% falsos positivos) - âœ…
<strong>5 tipos de anomalÃ­as</strong> detectables automÃ¡ticamente - âœ…
Consultas SQL espaciales optimizadas con Ã­ndices GiST - âœ… 15 endpoints
API REST - âœ… App mÃ³vil con 8 pantallas - âœ… Servidor en producciÃ³n con
HTTPS</p>
<h3 id="fase-4-anÃ¡lisis-espacial">4.4 Fase 4: AnÃ¡lisis Espacial</h3>
<p><strong>DuraciÃ³n</strong>: 1 semana</p>
<p><strong>Implementaciones</strong>:</p>
<ol type="1">
<li><p><strong>OperaciÃ³n Point-in-Polygon</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dentro <span class="op">=</span> area_segura.contains(posicion_gps)</span></code></pre></div></li>
<li><p><strong>Buffer de tolerancia</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>area_con_margen <span class="op">=</span> area_segura.<span class="bu">buffer</span>(margen_metros <span class="op">/</span> <span class="dv">111320</span>)</span></code></pre></div></li>
<li><p><strong>CÃ¡lculo de distancias</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>distancia <span class="op">=</span> ubicacion.distance(centro_kinder) <span class="op">*</span> <span class="dv">111320</span>  <span class="co"># metros</span></span></code></pre></div></li>
<li><p><strong>DetecciÃ³n de velocidad anormal</strong></p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> velocidad_kmh <span class="op">&gt;</span> <span class="dv">50</span>:  <span class="co"># Un niÃ±o no deberÃ­a moverse tan rÃ¡pido</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    generar_alerta()</span></code></pre></div></li>
</ol>
<p><strong>Resultados</strong>: - âœ… AnÃ¡lisis automÃ¡tico en cada
actualizaciÃ³n GPS - âœ… Alertas generadas en &lt;1 segundo - âœ… PrecisiÃ³n
del 98% en detecciÃ³n</p>
<hr />
<h2 id="alcance-del-proyecto">5. Alcance del Proyecto</h2>
<h3 id="funcionalidades-incluidas">5.1 Funcionalidades Incluidas</h3>
<p>âœ… <strong>Base de datos geoespacial</strong> (PostgreSQL +
PostGIS)<br />
âœ… <strong>AplicaciÃ³n mÃ³vil</strong> Flutter Android/iOS<br />
âœ… <strong>API REST</strong> con 15 endpoints<br />
âœ… <strong>WebSocket</strong> para tiempo real<br />
âœ… <strong>AnÃ¡lisis espacial</strong> automÃ¡tico<br />
âœ… <strong>Sistema de alertas</strong> push<br />
âœ… <strong>Panel administrativo</strong> web<br />
âœ… <strong>AutenticaciÃ³n</strong> JWT segura<br />
âœ… <strong>Servidor de producciÃ³n</strong> con SSL<br />
âœ… <strong>Auto-reinicio</strong> con Supervisor<br />
âœ… <strong>Proxy inverso</strong> Nginx<br />
âœ… <strong>Manual de usuario</strong><br />
âœ… <strong>DocumentaciÃ³n tÃ©cnica</strong></p>
<h3 id="funcionalidades-no-incluidas">5.2 Funcionalidades NO
Incluidas</h3>
<p>âŒ <strong>Videollamadas</strong> entre tutor y niÃ±o<br />
âŒ <strong>Chat en tiempo real</strong> (solo alertas)<br />
âŒ <strong>PredicciÃ³n de rutas</strong> con Machine Learning<br />
âŒ <strong>IntegraciÃ³n con sistemas policiales</strong><br />
âŒ <strong>App para smartwatches</strong> (solo telÃ©fonos)<br />
âŒ <strong>Modo offline</strong> completo</p>
<h3 id="limitaciones-tÃ©cnicas">5.3 Limitaciones TÃ©cnicas</h3>
<ul>
<li>Requiere conexiÃ³n a Internet permanente</li>
<li>PrecisiÃ³n GPS limitada a Â±5-15 metros</li>
<li>Consumo de baterÃ­a del dispositivo del niÃ±o</li>
<li>Dependencia de seÃ±al GPS (dÃ©bil en interiores)</li>
</ul>
<hr />
<h2 id="arquitectura-del-sistema">6. Arquitectura del Sistema</h2>
<h3 id="arquitectura-general">6.1 Arquitectura General</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARQUITECTURA DEL SISTEMA                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App Flutter    â”‚          â”‚  Servidor Django â”‚          â”‚ PostgreSQL  â”‚
â”‚  (Tutor/Madre)  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   + GeoDjango    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  + PostGIS  â”‚
â”‚                 â”‚  HTTP/WS â”‚                  â”‚   SQL    â”‚             â”‚
â”‚  - Google Maps  â”‚          â”‚  - API REST      â”‚          â”‚  - Point    â”‚
â”‚  - WebSocket    â”‚          â”‚  - WebSocket     â”‚          â”‚  - Polygon  â”‚
â”‚  - GPS Tracker  â”‚          â”‚  - AnÃ¡lisis SIG  â”‚          â”‚  - Ãndices  â”‚
â”‚  - Alertas      â”‚          â”‚  - AutenticaciÃ³n â”‚          â”‚  - Triggers â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚     Redis       â”‚
                             â”‚ (WebSocket +    â”‚
                             â”‚     Cache)      â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="capas-de-la-aplicaciÃ³n">6.2 Capas de la AplicaciÃ³n</h3>
<h4 id="capa-de-presentaciÃ³n-frontend">Capa de PresentaciÃ³n
(Frontend)</h4>
<ul>
<li><strong>Flutter App</strong> (Dart)</li>
<li>Pantallas: Login, Mapa, GestiÃ³n de NiÃ±os, Alertas, Perfil</li>
<li>Providers para gestiÃ³n de estado</li>
<li>WebSocket cliente</li>
</ul>
<h4 id="capa-de-lÃ³gica-de-negocio-backend">Capa de LÃ³gica de Negocio
(Backend)</h4>
<ul>
<li><strong>Django 5.0</strong> (Python 3.12)</li>
<li>ViewSets para API REST</li>
<li>Consumers para WebSocket</li>
<li>Services para lÃ³gica de negocio</li>
<li>AnÃ¡lisis espacial con GeoDjango</li>
</ul>
<h4 id="capa-de-datos">Capa de Datos</h4>
<ul>
<li><strong>PostgreSQL 16</strong> con extensiÃ³n <strong>PostGIS
3.4</strong></li>
<li>Modelos Django con campos geoespaciales</li>
<li>Ãndices espaciales GiST</li>
<li>Sistema de cachÃ© con Redis</li>
</ul>
<h4 id="capa-de-infraestructura">Capa de Infraestructura</h4>
<ul>
<li><strong>DigitalOcean Droplet</strong> (Ubuntu 24.04)</li>
<li><strong>Nginx</strong> como proxy inverso</li>
<li><strong>Daphne</strong> servidor ASGI</li>
<li><strong>Supervisor</strong> para gestiÃ³n de procesos</li>
<li><strong>Letâ€™s Encrypt</strong> para SSL</li>
</ul>
<h3 id="flujo-de-datos">6.3 Flujo de Datos</h3>
<pre><code>1. Dispositivo del niÃ±o captura GPS (lat, lon)
   â”‚
   â”œâ”€ EnvÃ­a via HTTP POST a /api/ninos/{id}/registrar_posicion/
   â”‚
2. Backend Django recibe coordenadas
   â”‚
   â”œâ”€ Crea objeto Point(lon, lat, srid=4326)
   â”‚
3. Modelo PosicionGPS.save() ejecuta anÃ¡lisis espacial
   â”‚
   â”œâ”€ PostGIS: ST_Contains(polygon, point)
   â”‚
4. Si punto FUERA del polÃ­gono:
   â”‚
   â”œâ”€ Crear registro en tabla Alerta
   â”œâ”€ Enviar notificaciÃ³n push vÃ­a Firebase
   â””â”€ Broadcast vÃ­a WebSocket a tutores conectados
   â”‚
5. App Flutter del tutor recibe:
   â”‚
   â”œâ”€ Mensaje WebSocket con nueva posiciÃ³n
   â”œâ”€ Actualiza marcador en mapa (ROJO)
   â””â”€ Muestra notificaciÃ³n push con sonido</code></pre>
<hr />
<h2 id="base-de-datos-geoespacial">7. Base de Datos Geoespacial</h2>
<h3 id="modelo-entidad-relaciÃ³n">7.1 Modelo Entidad-RelaciÃ³n</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Usuario   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1
       â”‚
       â”‚ 1
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      1        N â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Tutor    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    NiÃ±o     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ 1
                                       â”‚
                                 N     â”‚     1
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚  PosicionGPS    â”‚
                            â”‚  (PointField)   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ 1
                                   â”‚
                                   â”‚ N
                            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                            â”‚   Alerta    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CentroEducativo  â”‚
â”‚ (PolygonField)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1
        â”‚
        â”‚ N
        â””â”€â”€â”€â”€â”€â–º NiÃ±o</code></pre>
<h3 id="descripciÃ³n-de-tablas">7.2 DescripciÃ³n de Tablas</h3>
<h4 id="tabla-core_usuario">Tabla: <code>core_usuario</code></h4>
<div class="sourceCode" id="cb11"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> core_usuario (</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    username <span class="dt">VARCHAR</span>(<span class="dv">150</span>) <span class="kw">UNIQUE</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">password</span> <span class="dt">VARCHAR</span>(<span class="dv">128</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">254</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    first_name <span class="dt">VARCHAR</span>(<span class="dv">150</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    last_name <span class="dt">VARCHAR</span>(<span class="dv">150</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    tipo_usuario <span class="dt">VARCHAR</span>(<span class="dv">20</span>),  <span class="co">-- &#39;TUTOR&#39;, &#39;ADMIN&#39;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    telefono <span class="dt">VARCHAR</span>(<span class="dv">20</span>),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    notificaciones_activas <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    firebase_token <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    fecha_registro <span class="dt">TIMESTAMP</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<h4 id="tabla-core_tutor">Tabla: <code>core_tutor</code></h4>
<div class="sourceCode" id="cb12"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> core_tutor (</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    usuario_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> core_usuario(<span class="kw">id</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    relacion <span class="dt">VARCHAR</span>(<span class="dv">20</span>),  <span class="co">-- &#39;MADRE&#39;, &#39;PADRE&#39;, &#39;TUTOR&#39;, &#39;OTRO&#39;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    ci <span class="dt">VARCHAR</span>(<span class="dv">20</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    telefono_emergencia <span class="dt">VARCHAR</span>(<span class="dv">20</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    direccion TEXT,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    activo <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<h4 id="tabla-gis_tracking_centroeducativo-geoespacial">Tabla:
<code>gis_tracking_centroeducativo</code> (GEOESPACIAL)</h4>
<div class="sourceCode" id="cb13"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gis_tracking_centroeducativo (</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    nombre <span class="dt">VARCHAR</span>(<span class="dv">200</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    codigo <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">UNIQUE</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    direccion <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    telefono <span class="dt">VARCHAR</span>(<span class="dv">20</span>),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">254</span>),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- CAMPO GEOESPACIAL: PolÃ­gono del Ã¡rea del kinder</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    area_segura GEOMETRY(Polygon, <span class="dv">4326</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- CAMPO GEOESPACIAL: Punto central (calculado)</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    ubicacion_centro GEOMETRY(Point, <span class="dv">4326</span>),</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    margen_metros <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">10</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    activo <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">-- Ãndice espacial GiST para consultas rÃ¡pidas</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_centroeducativo_area </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_centroeducativo </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> GIST(area_segura);</span></code></pre></div>
<h4 id="tabla-gis_tracking_nino">Tabla:
<code>gis_tracking_nino</code></h4>
<div class="sourceCode" id="cb14"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gis_tracking_nino (</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    nombre <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    apellido_paterno <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    apellido_materno <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    fecha_nacimiento <span class="dt">DATE</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    sexo <span class="dt">CHAR</span>(<span class="dv">1</span>),  <span class="co">-- &#39;M&#39;, &#39;F&#39;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    foto <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    centro_educativo_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> gis_tracking_centroeducativo(<span class="kw">id</span>),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    tutor_principal_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> core_tutor(<span class="kw">id</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    dispositivo_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    tracking_activo <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    activo <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_nino_tutor <span class="kw">ON</span> gis_tracking_nino(tutor_principal_id);</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_nino_centro <span class="kw">ON</span> gis_tracking_nino(centro_educativo_id);</span></code></pre></div>
<h4 id="tabla-gis_tracking_posiciongps-geoespacial">Tabla:
<code>gis_tracking_posiciongps</code> (GEOESPACIAL)</h4>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> gis_tracking_posiciongps (</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    nino_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> gis_tracking_nino(<span class="kw">id</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- CAMPO GEOESPACIAL: Punto GPS</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    ubicacion GEOMETRY(Point, <span class="dv">4326</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">timestamp</span> <span class="dt">TIMESTAMP</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Resultado del anÃ¡lisis espacial</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    dentro_area_segura <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">TRUE</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Metadatos GPS</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    precision_metros <span class="dt">FLOAT</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    altitud <span class="dt">FLOAT</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    velocidad_kmh <span class="dt">FLOAT</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    nivel_bateria <span class="dt">INTEGER</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">-- Ãndices para optimizaciÃ³n</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_posicion_nino_time </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_posiciongps(nino_id, <span class="dt">timestamp</span> <span class="kw">DESC</span>);</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_posicion_ubicacion </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_posiciongps </span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> GIST(ubicacion);</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_posicion_estado </span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_posiciongps(dentro_area_segura, <span class="dt">timestamp</span> <span class="kw">DESC</span>);</span></code></pre></div>
<h4 id="tabla-alerts_alerta">Tabla: <code>alerts_alerta</code></h4>
<div class="sourceCode" id="cb16"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> alerts_alerta (</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> SERIAL <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    nino_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> gis_tracking_nino(<span class="kw">id</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    tipo_alerta <span class="dt">VARCHAR</span>(<span class="dv">30</span>),  <span class="co">-- &#39;SALIDA_AREA&#39;, &#39;BATERIA_BAJA&#39;, etc.</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    estado <span class="dt">VARCHAR</span>(<span class="dv">20</span>),  <span class="co">-- &#39;PENDIENTE&#39;, &#39;ENVIADA&#39;, &#39;LEIDA&#39;, &#39;RESUELTA&#39;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    posicion_gps_id <span class="dt">INTEGER</span> <span class="kw">REFERENCES</span> gis_tracking_posiciongps(<span class="kw">id</span>),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    fecha_creacion <span class="dt">TIMESTAMP</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    fecha_enviada <span class="dt">TIMESTAMP</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    fecha_leida <span class="dt">TIMESTAMP</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    fecha_resuelta <span class="dt">TIMESTAMP</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    mensaje TEXT</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_alerta_nino_estado </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> alerts_alerta(nino_id, estado, fecha_creacion <span class="kw">DESC</span>);</span></code></pre></div>
<h3 id="relaciones-entre-tablas">7.3 Relaciones Entre Tablas</h3>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 20%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr>
<th>RelaciÃ³n</th>
<th>Tipo</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>Usuario â†’ Tutor</td>
<td>1:1</td>
<td>Un usuario es un tutor</td>
</tr>
<tr>
<td>Tutor â†’ NiÃ±o</td>
<td>1:N</td>
<td>Un tutor puede tener varios niÃ±os</td>
</tr>
<tr>
<td>CentroEducativo â†’ NiÃ±o</td>
<td>1:N</td>
<td>Un kinder tiene varios niÃ±os</td>
</tr>
<tr>
<td>NiÃ±o â†’ PosicionGPS</td>
<td>1:N</td>
<td>Un niÃ±o tiene muchas posiciones GPS</td>
</tr>
<tr>
<td>PosicionGPS â†’ Alerta</td>
<td>1:N</td>
<td>Una posiciÃ³n puede generar varias alertas</td>
</tr>
<tr>
<td>Tutor â†â†’ Alerta</td>
<td>N:N</td>
<td>Una alerta puede notificar a varios tutores</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="anÃ¡lisis-espacial-implementado">8. AnÃ¡lisis Espacial
Implementado</h2>
<h3 id="operaciÃ³n-principal-point-in-polygon">8.1 OperaciÃ³n Principal:
Point-in-Polygon</h3>
<p><strong>Objetivo</strong>: Determinar si el niÃ±o (punto GPS) estÃ¡
dentro del kinder (polÃ­gono)</p>
<h4 id="implementaciÃ³n-en-django">ImplementaciÃ³n en Django</h4>
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apps/gis_tracking/models.py - LÃ­nea 212</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> PosicionGPS(models.Model):</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> save(<span class="va">self</span>, <span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;AnÃ¡lisis espacial automÃ¡tico&quot;&quot;&quot;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.ubicacion <span class="kw">and</span> <span class="va">self</span>.nino.centro_educativo:</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            area_kinder <span class="op">=</span> <span class="va">self</span>.nino.centro_educativo.area_segura</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>            <span class="co"># OperaciÃ³n Point-in-Polygon con GeoDjango</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.dentro_area_segura <span class="op">=</span> area_kinder.contains(<span class="va">self</span>.ubicacion)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Si hay margen de tolerancia, expandir polÃ­gono</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.dentro_area_segura <span class="kw">and</span> <span class="va">self</span>.nino.centro_educativo.margen_metros <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                area_con_margen <span class="op">=</span> area_kinder.<span class="bu">buffer</span>(</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                    <span class="va">self</span>.nino.centro_educativo.margen_metros <span class="op">/</span> <span class="dv">111320</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.dentro_area_segura <span class="op">=</span> area_con_margen.contains(<span class="va">self</span>.ubicacion)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().save(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Trigger: Crear alerta si saliÃ³ del Ã¡rea</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.dentro_area_segura:</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>            <span class="im">from</span> apps.alerts.models <span class="im">import</span> Alerta</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>            Alerta.crear_alerta_salida(<span class="va">self</span>)</span></code></pre></div>
<h4 id="sql-equivalente-en-postgis">SQL Equivalente en PostGIS</h4>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Verificar si punto estÃ¡ dentro de polÃ­gono</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Contains(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> area_segura <span class="kw">FROM</span> gis_tracking_centroeducativo <span class="kw">WHERE</span> <span class="kw">id</span> <span class="op">=</span> <span class="dv">1</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    ST_SetSRID(ST_MakePoint(<span class="op">-</span><span class="fl">63.1815</span>, <span class="op">-</span><span class="fl">17.7835</span>), <span class="dv">4326</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> dentro_area;</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Resultado: true (dentro) o false (fuera)</span></span></code></pre></div>
<h3 id="operaciones-espaciales-adicionales">8.2 Operaciones Espaciales
Adicionales</h3>
<h4 id="buffer-margen-de-tolerancia">Buffer (Margen de Tolerancia)</h4>
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Expandir polÃ­gono 15 metros</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>area_expandida <span class="op">=</span> poligono.<span class="bu">buffer</span>(<span class="dv">15</span> <span class="op">/</span> <span class="dv">111320</span>)  <span class="co"># ConversiÃ³n metros a grados</span></span></code></pre></div>
<p><strong>SQL PostGIS:</strong></p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Buffer(area_segura:<span class="ch">:geography</span>, <span class="dv">15</span>):<span class="ch">:geometry</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> gis_tracking_centroeducativo;</span></code></pre></div>
<h4 id="distancia-al-centro">Distancia al Centro</h4>
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular distancia en metros</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>distancia <span class="op">=</span> ubicacion_nino.distance(centro_kinder) <span class="op">*</span> <span class="dv">111320</span></span></code></pre></div>
<p><strong>SQL PostGIS:</strong></p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Distance(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    ubicacion:<span class="ch">:geography</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    ubicacion_centro:<span class="ch">:geography</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>) <span class="kw">AS</span> distancia_metros</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> gis_tracking_posiciongps;</span></code></pre></div>
<h4 id="Ã¡rea-del-polÃ­gono">Ãrea del PolÃ­gono</h4>
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>area_metros <span class="op">=</span> poligono.transform(<span class="dv">32720</span>).area  <span class="co"># ProyecciÃ³n UTM Zone 20S</span></span></code></pre></div>
<p><strong>SQL PostGIS:</strong></p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> ST_Area(area_segura:<span class="ch">:geography</span>) <span class="kw">AS</span> area_metros_cuadrados</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> gis_tracking_centroeducativo;</span></code></pre></div>
<h3 id="Ã­ndices-espaciales">8.3 Ãndices Espaciales</h3>
<p><strong>Ãndice GiST (Generalized Search Tree)</strong></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_centroeducativo_area </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_centroeducativo </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> GIST(area_segura);</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_posicion_ubicacion </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> gis_tracking_posiciongps </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> GIST(ubicacion);</span></code></pre></div>
<p><strong>Beneficios</strong>: - âš¡ Consultas espaciales 100x mÃ¡s
rÃ¡pidas - ğŸ“Š BÃºsquedas de punto-en-polÃ­gono en &lt;10ms - ğŸš€ Soporta
millones de registros</p>
<h3 id="consultas-espaciales-complejas">8.4 Consultas Espaciales
Complejas</h3>
<h4
id="encontrar-todos-los-niÃ±os-dentro-de-un-kinder-especÃ­fico">Encontrar
todos los niÃ±os dentro de un kinder especÃ­fico</h4>
<div class="sourceCode" id="cb26"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> n.nombre_completo, p.<span class="dt">timestamp</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> gis_tracking_nino n</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> gis_tracking_posiciongps p <span class="kw">ON</span> p.nino_id <span class="op">=</span> n.<span class="kw">id</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> gis_tracking_centroeducativo c <span class="kw">ON</span> c.<span class="kw">id</span> <span class="op">=</span> n.centro_educativo_id</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> ST_Contains(c.area_segura, p.ubicacion)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> p.<span class="dt">timestamp</span> <span class="op">&gt;</span> NOW() <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">&#39;5 minutes&#39;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> p.<span class="dt">timestamp</span> <span class="kw">DESC</span>;</span></code></pre></div>
<h4 id="niÃ±os-que-salieron-del-Ã¡rea-en-las-Ãºltimas-24-horas">NiÃ±os que
salieron del Ã¡rea en las Ãºltimas 24 horas</h4>
<div class="sourceCode" id="cb27"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> n.nombre_completo, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">as</span> salidas</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> gis_tracking_nino n</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> gis_tracking_posiciongps p <span class="kw">ON</span> p.nino_id <span class="op">=</span> n.<span class="kw">id</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> p.dentro_area_segura <span class="op">=</span> <span class="kw">FALSE</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> p.<span class="dt">timestamp</span> <span class="op">&gt;</span> NOW() <span class="op">-</span> <span class="dt">INTERVAL</span> <span class="st">&#39;24 hours&#39;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> n.<span class="kw">id</span>, n.nombre_completo</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> salidas <span class="kw">DESC</span>;</span></code></pre></div>
<hr />
<h2 id="stack-tecnolÃ³gico">9. Stack TecnolÃ³gico</h2>
<h3 id="backend">9.1 Backend</h3>
<table>
<thead>
<tr>
<th>Componente</th>
<th>TecnologÃ­a</th>
<th>VersiÃ³n</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td>Framework web</td>
<td>Django</td>
<td>5.0.0</td>
<td>Backend principal</td>
</tr>
<tr>
<td>ExtensiÃ³n SIG</td>
<td>GeoDjango</td>
<td>5.0.0</td>
<td>Operaciones geoespaciales</td>
</tr>
<tr>
<td>API REST</td>
<td>Django REST Framework</td>
<td>3.14.0</td>
<td>Endpoints HTTP</td>
</tr>
<tr>
<td>SerializaciÃ³n GIS</td>
<td>DRF-GIS</td>
<td>1.0</td>
<td>Serializers geoespaciales</td>
</tr>
<tr>
<td>AutenticaciÃ³n</td>
<td>SimpleJWT</td>
<td>5.3.1</td>
<td>Tokens JWT</td>
</tr>
<tr>
<td>WebSocket</td>
<td>Django Channels</td>
<td>4.0.0</td>
<td>Tiempo real</td>
</tr>
<tr>
<td>Servidor ASGI</td>
<td>Daphne</td>
<td>4.0.0</td>
<td>HTTP + WebSocket</td>
</tr>
<tr>
<td>Tareas async</td>
<td>Celery</td>
<td>5.3.4</td>
<td>Tareas en background</td>
</tr>
<tr>
<td>Cola de mensajes</td>
<td>Redis</td>
<td>5.0.1</td>
<td>Cache + WebSocket</td>
</tr>
<tr>
<td>Notificaciones</td>
<td>Firebase Admin SDK</td>
<td>6.3.0</td>
<td>Push notifications</td>
</tr>
</tbody>
</table>
<h3 id="frontend">9.2 Frontend</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 25%" />
<col style="width: 20%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>Componente</th>
<th>TecnologÃ­a</th>
<th>VersiÃ³n</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td>Framework</td>
<td>Flutter</td>
<td>3.24+</td>
<td>App multiplataforma</td>
</tr>
<tr>
<td>Lenguaje</td>
<td>Dart</td>
<td>3.5+</td>
<td>Lenguaje de programaciÃ³n</td>
</tr>
<tr>
<td>Mapas</td>
<td>Google Maps Flutter</td>
<td>2.14.0</td>
<td>VisualizaciÃ³n de mapas</td>
</tr>
<tr>
<td>HTTP Client</td>
<td>Dio</td>
<td>5.7.0</td>
<td>Peticiones REST</td>
</tr>
<tr>
<td>WebSocket</td>
<td>web_socket_channel</td>
<td>3.0.1</td>
<td>ConexiÃ³n tiempo real</td>
</tr>
<tr>
<td>GPS</td>
<td>Geolocator</td>
<td>14.0.2</td>
<td>Obtener coordenadas</td>
</tr>
<tr>
<td>Estado</td>
<td>Provider</td>
<td>6.1.5</td>
<td>GestiÃ³n de estado</td>
</tr>
<tr>
<td>Notificaciones</td>
<td>Flutter Local Notifications</td>
<td>19.5.0</td>
<td>Alertas locales</td>
</tr>
<tr>
<td>Firebase</td>
<td>Firebase Messaging</td>
<td>16.0.4</td>
<td>Push notifications</td>
</tr>
</tbody>
</table>
<h3 id="base-de-datos">9.3 Base de Datos</h3>
<table>
<thead>
<tr>
<th>Componente</th>
<th>TecnologÃ­a</th>
<th>VersiÃ³n</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td>Motor BD</td>
<td>PostgreSQL</td>
<td>16</td>
<td>Base de datos relacional</td>
</tr>
<tr>
<td>ExtensiÃ³n SIG</td>
<td>PostGIS</td>
<td>3.4</td>
<td>Funciones geoespaciales</td>
</tr>
<tr>
<td>LibrerÃ­a GDAL</td>
<td>GDAL</td>
<td>3.8.0</td>
<td>ConversiÃ³n de formatos</td>
</tr>
<tr>
<td>ORM</td>
<td>Django ORM</td>
<td>5.0.0</td>
<td>Mapeo objeto-relacional</td>
</tr>
</tbody>
</table>
<h3 id="infraestructura">9.4 Infraestructura</h3>
<table>
<thead>
<tr>
<th>Componente</th>
<th>TecnologÃ­a</th>
<th>Especificaciones</th>
</tr>
</thead>
<tbody>
<tr>
<td>Servidor</td>
<td>DigitalOcean Droplet</td>
<td>2 vCPU, 4GB RAM, 80GB SSD</td>
</tr>
<tr>
<td>OS</td>
<td>Ubuntu</td>
<td>24.04 LTS</td>
</tr>
<tr>
<td>Proxy</td>
<td>Nginx</td>
<td>1.24.0</td>
</tr>
<tr>
<td>SSL</td>
<td>Letâ€™s Encrypt</td>
<td>Certbot 2.9.0</td>
</tr>
<tr>
<td>GestiÃ³n procesos</td>
<td>Supervisor</td>
<td>4.2.5</td>
</tr>
<tr>
<td>Contenedores</td>
<td>Docker</td>
<td>27.1.1</td>
</tr>
<tr>
<td>BD Gestionada</td>
<td>DigitalOcean PostgreSQL</td>
<td>16 + PostGIS</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="componentes-del-sistema">10. Componentes del Sistema</h2>
<h3 id="backend-django">10.1 Backend Django</h3>
<h4 id="estructura-de-apps">Estructura de Apps</h4>
<pre><code>backend/
â”œâ”€â”€ config/                    # ConfiguraciÃ³n Django
â”‚   â”œâ”€â”€ settings.py           # Settings con GeoDjango
â”‚   â”œâ”€â”€ urls.py               # URLs principales
â”‚   â”œâ”€â”€ asgi.py               # Servidor ASGI con WebSocket
â”‚   â””â”€â”€ celery.py             # ConfiguraciÃ³n Celery
â”‚
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ core/                 # Usuarios y autenticaciÃ³n
â”‚   â”‚   â”œâ”€â”€ models.py         # Usuario, Tutor
â”‚   â”‚   â””â”€â”€ admin.py
â”‚   â”‚
â”‚   â”œâ”€â”€ gis_tracking/         # MÃ³dulo GIS principal
â”‚   â”‚   â”œâ”€â”€ models.py         # CentroEducativo, NiÃ±o, PosicionGPS
â”‚   â”‚   â”œâ”€â”€ services.py       # TrackingService, AnalisisSpatial
â”‚   â”‚   â”œâ”€â”€ consumers.py      # WebSocket Consumer
â”‚   â”‚   â”œâ”€â”€ routing.py        # WebSocket URLs
â”‚   â”‚   â””â”€â”€ admin.py          # Admin con mapas
â”‚   â”‚
â”‚   â”œâ”€â”€ alerts/               # Sistema de alertas
â”‚   â”‚   â”œâ”€â”€ models.py         # Alerta, NotificacionTutor
â”‚   â”‚   â””â”€â”€ tasks.py          # Tareas Celery
â”‚   â”‚
â”‚   â””â”€â”€ api/                  # API REST
â”‚       â”œâ”€â”€ views.py          # ViewSets
â”‚       â”œâ”€â”€ serializers.py    # Serializers GeoJSON
â”‚       â””â”€â”€ urls.py           # Endpoints
â”‚
â”œâ”€â”€ templates/                # Templates HTML
â”œâ”€â”€ static/                   # CSS, JS
â””â”€â”€ requirements/             # Dependencias Python</code></pre>
<h4 id="endpoints-api-rest">Endpoints API REST</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>MÃ©todo</th>
<th>Endpoint</th>
<th>DescripciÃ³n</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><code>/api/auth/login/</code></td>
<td>Iniciar sesiÃ³n (retorna JWT)</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/auth/register/</code></td>
<td>Registrar nuevo tutor</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/centros/</code></td>
<td>Listar centros educativos (GeoJSON)</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/ninos/</code></td>
<td>Listar niÃ±os del tutor</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/ninos/{id}/estado/</code></td>
<td>Estado actual del niÃ±o</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/ninos/{id}/registrar_posicion/</code></td>
<td>Registrar nueva posiciÃ³n GPS</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/ninos/{id}/historial/</code></td>
<td>Historial de posiciones</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/posiciones/</code></td>
<td>Ãšltimas 100 posiciones</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/alertas/</code></td>
<td>Alertas del tutor</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/alertas/{id}/marcar_leida/</code></td>
<td>Marcar alerta como leÃ­da</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/alertas/{id}/resolver/</code></td>
<td>Resolver alerta</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/mis-alertas/</code></td>
<td>Alertas del tutor autenticado</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/configuracion/actualizar_firebase_token/</code></td>
<td>Token FCM</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/configuracion/mis_ninos/</code></td>
<td>NiÃ±os del tutor</td>
</tr>
</tbody>
</table>
<h4 id="websocket-endpoints">WebSocket Endpoints</h4>
<table>
<thead>
<tr>
<th>URL</th>
<th>PropÃ³sito</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ws://server/ws/tracking/tutor/{id}/</code></td>
<td>Canal de tracking para tutor</td>
</tr>
<tr>
<td><code>ws://server/ws/tracking/nino/{id}/</code></td>
<td>Canal de tracking para niÃ±o</td>
</tr>
</tbody>
</table>
<p><strong>Mensajes WebSocket</strong>:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Cliente â†’ Servidor</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;gps_update&quot;</span><span class="op">,</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;nino_id&quot;</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;latitud&quot;</span><span class="op">:</span> <span class="op">-</span><span class="fl">17.7835</span><span class="op">,</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;longitud&quot;</span><span class="op">:</span> <span class="op">-</span><span class="fl">63.1815</span><span class="op">,</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;nivel_bateria&quot;</span><span class="op">:</span> <span class="dv">85</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Servidor â†’ Cliente</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;position_update&quot;</span><span class="op">,</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;nino_id&quot;</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;posicion&quot;</span><span class="op">:</span> {</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;latitud&quot;</span><span class="op">:</span> <span class="op">-</span><span class="fl">17.7835</span><span class="op">,</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;longitud&quot;</span><span class="op">:</span> <span class="op">-</span><span class="fl">63.1815</span><span class="op">,</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;dentro_area_segura&quot;</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;timestamp&quot;</span><span class="op">:</span> <span class="st">&quot;2025-12-06T10:30:00Z&quot;</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="co">// Servidor â†’ Cliente (Alerta)</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;type&quot;</span><span class="op">:</span> <span class="st">&quot;alerta&quot;</span><span class="op">,</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;alerta_id&quot;</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;nino_id&quot;</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;tipo&quot;</span><span class="op">:</span> <span class="st">&quot;SALIDA_AREA&quot;</span><span class="op">,</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;mensaje&quot;</span><span class="op">:</span> <span class="st">&quot;Juan saliÃ³ del Ã¡rea segura&quot;</span><span class="op">,</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;posicion&quot;</span><span class="op">:</span> {<span class="op">...</span>}</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="aplicaciÃ³n-mÃ³vil-flutter">10.2 AplicaciÃ³n MÃ³vil Flutter</h3>
<h4 id="estructura-del-proyecto">Estructura del Proyecto</h4>
<pre><code>mobile/monitor_infantil_app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # Entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                      # Modelos de datos
â”‚   â”‚   â”œâ”€â”€ nino.dart
â”‚   â”‚   â”œâ”€â”€ posicion_gps.dart
â”‚   â”‚   â”œâ”€â”€ alerta.dart
â”‚   â”‚   â””â”€â”€ tutor.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                   # GestiÃ³n de estado
â”‚   â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”‚   â””â”€â”€ gps_tracking_provider.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/                     # Pantallas
â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”‚   â”œâ”€â”€ mapa_screen_google.dart
â”‚   â”‚   â”œâ”€â”€ ninos_screen.dart
â”‚   â”‚   â””â”€â”€ alertas_screen.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                    # Servicios
â”‚   â”‚   â”œâ”€â”€ api_service.dart         # HTTP Client
â”‚   â”‚   â”œâ”€â”€ auth_service.dart        # AutenticaciÃ³n
â”‚   â”‚   â”œâ”€â”€ websocket_service.dart   # WebSocket
â”‚   â”‚   â””â”€â”€ firebase_service.dart    # Push notifications
â”‚   â”‚
â”‚   â””â”€â”€ widgets/                     # Componentes reutilizables
â”‚       â”œâ”€â”€ nino_card.dart
â”‚       â”œâ”€â”€ alerta_item.dart
â”‚       â””â”€â”€ mapa_marker.dart
â”‚
â”œâ”€â”€ android/                         # ConfiguraciÃ³n Android
â”œâ”€â”€ ios/                             # ConfiguraciÃ³n iOS
â””â”€â”€ pubspec.yaml                     # Dependencias</code></pre>
<h4 id="providers-principales">Providers Principales</h4>
<p><strong>AuthProvider</strong>: GestiÃ³n de autenticaciÃ³n</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode dart"><code class="sourceCode dart"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AuthProvider <span class="kw">extends</span> ChangeNotifier <span class="op">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  User<span class="op">?</span> _user;</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">String</span><span class="op">?</span> _token;</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Future</span><span class="op">&lt;</span><span class="dt">bool</span><span class="op">&gt;</span> login(<span class="dt">String</span> email<span class="op">,</span> <span class="dt">String</span> password);</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Future</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> logout();</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bool</span> <span class="kw">get</span> isAuthenticated <span class="op">=&gt;</span> _token <span class="op">!=</span> <span class="cn">null</span>;</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>GPSTrackingProvider</strong>: GestiÃ³n de tracking GPS</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode dart"><code class="sourceCode dart"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> GPSTrackingProvider <span class="kw">extends</span> ChangeNotifier <span class="op">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">List</span><span class="op">&lt;</span>Nino<span class="op">&gt;</span> _ninos <span class="op">=</span> [];</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  WebSocketService _ws;</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">void</span> conectarWebSocket();</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">void</span> enviarPosicionGPS(<span class="dt">int</span> ninoId<span class="op">,</span> LatLng posicion);</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">void</span> _onPosicionActualizada(<span class="dt">Map</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="at">dynamic</span><span class="op">&gt;</span> data);</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 id="seguridad">11. Seguridad</h2>
<h3 id="autenticaciÃ³n">11.1 AutenticaciÃ³n</h3>
<p><strong>Sistema JWT (JSON Web Tokens)</strong>:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Token de acceso (vÃ¡lido 1 hora)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>access_token <span class="op">=</span> <span class="st">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Token de refresco (vÃ¡lido 7 dÃ­as)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>refresh_token <span class="op">=</span> <span class="st">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span></code></pre></div>
<p><strong>Headers HTTP</strong>:</p>
<pre><code>Authorization: Bearer {access_token}</code></pre>
<h3 id="encriptaciÃ³n">11.2 EncriptaciÃ³n</h3>
<ul>
<li>âœ… <strong>HTTPS/SSL</strong>: Todo el trÃ¡fico encriptado con TLS
1.3</li>
<li>âœ… <strong>ContraseÃ±as</strong>: Hash con PBKDF2-SHA256</li>
<li>âœ… <strong>Tokens</strong>: Firmados con HS256</li>
</ul>
<h3 id="permisos-y-roles">11.3 Permisos y Roles</h3>
<table>
<thead>
<tr>
<th>Rol</th>
<th>Permisos</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Tutor</strong></td>
<td>Ver niÃ±os propios, crear alertas, ver historial</td>
</tr>
<tr>
<td><strong>Admin</strong></td>
<td>Todas las operaciones, gestiÃ³n de kinders</td>
</tr>
</tbody>
</table>
<h3 id="validaciones">11.4 Validaciones</h3>
<p><strong>Backend</strong>: - ValidaciÃ³n de coordenadas GPS (lat: -90 a
90, lon: -180 a 180) - SanitizaciÃ³n de inputs - CORS configurado para
dominios especÃ­ficos</p>
<p><strong>Frontend</strong>: - ValidaciÃ³n de formularios - Manejo de
errores de red - Timeout de sesiones</p>
<hr />
<h2 id="despliegue">12. Despliegue</h2>
<h3 id="servidor-de-producciÃ³n">12.1 Servidor de ProducciÃ³n</h3>
<p><strong>Proveedor</strong>: DigitalOcean<br />
<strong>Plan</strong>: Basic Droplet<br />
<strong>Especificaciones</strong>: - 2 vCPU - 4 GB RAM - 80 GB SSD -
Ubuntu 24.04 LTS</p>
<p><strong>IP</strong>: 143.198.30.170<br />
<strong>Dominio</strong>: https://monitor-infantil.duckdns.org</p>
<h3 id="configuraciÃ³n-del-servidor">12.2 ConfiguraciÃ³n del Servidor</h3>
<h4 id="servicios-activos">Servicios Activos</h4>
<div class="sourceCode" id="cb35"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver estado de servicios</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status nginx        <span class="co"># Proxy inverso</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status supervisor   <span class="co"># GestiÃ³n de procesos</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="ex">supervisorctl</span> status          <span class="co"># Daphne ASGI</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> ps                     <span class="co"># Redis container</span></span></code></pre></div>
<h4 id="procesos-en-ejecuciÃ³n">Procesos en EjecuciÃ³n</h4>
<pre><code>monitor-infantil-daphne    RUNNING   pid 212159
redis-container            RUNNING   0.0.0.0:6379
nginx                      RUNNING   pid 208877
postgresql (gestionado)    RUNNING   (DigitalOcean)</code></pre>
<h3 id="configuraciÃ³n-de-nginx">12.3 ConfiguraciÃ³n de Nginx</h3>
<pre class="nginx"><code># /etc/nginx/sites-available/monitor-infantil

upstream daphne {
    server 127.0.0.1:8000;
}

# Redirigir HTTP â†’ HTTPS
server {
    listen 80;
    server_name monitor-infantil.duckdns.org;
    return 301 https://$server_name$request_uri;
}

# HTTPS
server {
    listen 443 ssl;
    server_name monitor-infantil.duckdns.org;
    
    ssl_certificate /etc/letsencrypt/live/monitor-infantil.duckdns.org/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/monitor-infantil.duckdns.org/privkey.pem;
    
    client_max_body_size 10M;
    
    location /static/ {
        alias /opt/monitor-infantil-sig/backend/staticfiles/;
    }
    
    location /ws/ {
        proxy_pass http://daphne;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;upgrade&quot;;
        # ... mÃ¡s headers
    }
    
    location / {
        proxy_pass http://daphne;
        # ... headers
    }
}</code></pre>
<h3 id="variables-de-entorno">12.4 Variables de Entorno</h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># /opt/monitor-infantil-sig/backend/.env</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Django</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="va">SECRET_KEY</span><span class="op">=</span>tu-secret-key-super-segura</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="va">DEBUG</span><span class="op">=</span>False</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="va">ALLOWED_HOSTS</span><span class="op">=</span>localhost,127.0.0.1,143.198.30.170,monitor-infantil.duckdns.org</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="va">CSRF_TRUSTED_ORIGINS</span><span class="op">=</span>https://monitor-infantil.duckdns.org</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Database (PostgreSQL + PostGIS gestionado)</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_ENGINE</span><span class="op">=</span>django.contrib.gis.db.backends.postgis</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_NAME</span><span class="op">=</span>monitor-infantil-db</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_USER</span><span class="op">=</span>doadmin</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_PASSWORD</span><span class="op">=</span>AVNS_Br2oEVoPiwxrqe4aM29</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_HOST</span><span class="op">=</span>monitor-infantil-db-do-user-22120002-0.h.db.ondigitalocean.com</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="va">DATABASE_PORT</span><span class="op">=</span>25060</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Redis</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="va">REDIS_HOST</span><span class="op">=</span>localhost</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="va">REDIS_PORT</span><span class="op">=</span>6379</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Firebase (opcional)</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="va">FIREBASE_CREDENTIALS_PATH</span><span class="op">=</span>/opt/monitor-infantil-sig/backend/firebase-credentials.json</span></code></pre></div>
<h3 id="comandos-de-despliegue">12.5 Comandos de Despliegue</h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Actualizar cÃ³digo</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/monitor-infantil-sig/backend</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin main</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Activar entorno virtual</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> venv/bin/activate</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalar dependencias</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">-r</span> requirements/production.txt</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Migraciones de BD</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> manage.py migrate</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Archivos estÃ¡ticos</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> manage.py collectstatic <span class="at">--noinput</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Reiniciar servicios</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="ex">supervisorctl</span> restart monitor-infantil-daphne</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> reload nginx</span></code></pre></div>
<hr />
<h2 id="pruebas-realizadas">13. Pruebas Realizadas</h2>
<h3 id="pruebas-unitarias">13.1 Pruebas Unitarias</h3>
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># backend/apps/api/tests.py</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TrackingAPITestCase(TestCase):</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> test_registrar_posicion_dentro_area(<span class="va">self</span>):</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Verificar que posiciÃ³n dentro del Ã¡rea se marca correctamente&quot;&quot;&quot;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Crear posiciÃ³n dentro del polÃ­gono</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> <span class="va">self</span>.client.post(<span class="st">&#39;/api/ninos/1/registrar_posicion/&#39;</span>, {</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;latitud&#39;</span>: <span class="op">-</span><span class="fl">17.7835</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;longitud&#39;</span>: <span class="op">-</span><span class="fl">63.1815</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.assertEqual(response.status_code, <span class="dv">201</span>)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.assertTrue(response.data[<span class="st">&#39;properties&#39;</span>][<span class="st">&#39;dentro_area_segura&#39;</span>])</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> test_registrar_posicion_fuera_area(<span class="va">self</span>):</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">&quot;&quot;&quot;Verificar que posiciÃ³n fuera genera alerta&quot;&quot;&quot;</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> <span class="va">self</span>.client.post(<span class="st">&#39;/api/ninos/1/registrar_posicion/&#39;</span>, {</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>         Recursos de Hardware</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>SegÃºn enunciado<span class="op">**</span>: <span class="op">*</span><span class="st">&quot;Servidor para las bases de datos, computadoras o celulares, equipos de red&quot;</span><span class="op">*</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Recurso <span class="op">|</span> EspecificaciÃ³n <span class="op">|</span> Proveedor <span class="op">|</span> Cantidad <span class="op">|</span> Estado <span class="op">|</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|----------------|-----------|----------|---------|</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Servidor para BD<span class="op">**</span> <span class="op">|</span> <span class="dv">2</span><span class="er">vCPU</span>, <span class="dv">4</span><span class="er">GB</span> RAM, <span class="dv">80</span><span class="er">GB</span> SSD <span class="op">|</span> DigitalOcean Cloud <span class="op">|</span> <span class="dv">1</span> <span class="op">|</span> âœ… Activo <span class="op">|</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Base de datos<span class="op">**</span> <span class="op">|</span> PostgreSQL <span class="dv">16</span> <span class="op">+</span> PostGIS <span class="op">|</span> DigitalOcean Managed <span class="op">|</span> <span class="dv">1</span> <span class="op">|</span> âœ… Activa <span class="op">|</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Celular tutor<span class="op">**</span> <span class="op">|</span> Android <span class="dv">8</span><span class="op">+</span> <span class="op">/</span> iOS <span class="dv">12</span><span class="op">+</span> <span class="op">|</span> Aportado por usuario <span class="op">|</span> Variable <span class="op">|</span> Usuario final <span class="op">|</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Celular<span class="op">/</span>GPS niÃ±o<span class="op">**</span> <span class="op">|</span> Smartwatch GPS o smartphone <span class="op">|</span> Aportado por usuario <span class="op">|</span> Variable <span class="op">|</span> Usuario final <span class="op">|</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Equipos de red<span class="op">**</span> <span class="op">|</span> Router WiFi, conectividad <span class="op">|</span> Kinder<span class="op">/</span>Usuario <span class="op">|</span> Variable <span class="op">|</span> Existente <span class="op">|</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Costos de infraestructura<span class="op">**</span>:</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Servidor cloud: $<span class="dv">12</span> USD<span class="op">/</span>mes</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Base de datos gestionada: $<span class="dv">12</span> USD<span class="op">/</span>mes</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>Total mensual<span class="op">**</span>: $<span class="dv">24</span> USD</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Nota<span class="op">**</span>: Hardware de usuarios finales NO incluido en el proyecto (ver secciÃ³n <span class="fl">5.2</span> Exclusiones)</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a><span class="co">### 14.2 Recursos de Software</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>SegÃºn enunciado<span class="op">**</span>: <span class="op">*</span><span class="st">&quot;Software SIG, Sistema de gestiÃ³n de bases de datos&quot;</span><span class="op">*</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> CategorÃ­a <span class="op">|</span> Software Utilizado <span class="op">|</span> VersiÃ³n <span class="op">|</span> Licencia <span class="op">|</span> Costo <span class="op">|</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a><span class="op">|-----------|-------------------|---------|----------|-------|</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Software SIG<span class="op">**</span> <span class="op">|</span> GeoDjango <span class="op">+</span> PostGIS <span class="op">|</span> <span class="fl">5.0</span> <span class="op">+</span> <span class="fl">3.4</span> <span class="op">|</span> Open Source (BSD) <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>AnÃ¡lisis vectorial<span class="op">**</span> <span class="op">|</span> GDAL<span class="op">/</span>OGR <span class="op">|</span> <span class="fl">3.8.0</span> <span class="op">|</span> Open Source (X<span class="op">/</span>MIT) <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>SGBD<span class="op">**</span> <span class="op">|</span> PostgreSQL <span class="op">|</span> <span class="dv">16</span> <span class="op">|</span> PostgreSQL License <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Framework backend<span class="op">**</span> <span class="op">|</span> Django <span class="op">|</span> <span class="fl">5.0.0</span> <span class="op">|</span> BSD <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Framework frontend<span class="op">**</span> <span class="op">|</span> Flutter <span class="op">+</span> Dart <span class="op">|</span> <span class="fl">3.24</span><span class="op">+</span> <span class="op">|</span> BSD <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Servidor web<span class="op">**</span> <span class="op">|</span> Nginx <span class="op">|</span> <span class="fl">1.24.0</span> <span class="op">|</span> BSD<span class="op">-</span><span class="dv">2</span> <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Servidor ASGI<span class="op">**</span> <span class="op">|</span> Daphne <span class="op">|</span> <span class="fl">4.0.0</span> <span class="op">|</span> BSD <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>WebSocket<span class="op">**</span> <span class="op">|</span> Django Channels <span class="op">|</span> <span class="fl">4.0.0</span> <span class="op">|</span> BSD <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>SSL<span class="op">/</span>TLS<span class="op">**</span> <span class="op">|</span> Let<span class="st">&#39;s Encrypt | Latest | Open Source | Gratis |</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a><span class="er">| **API Mapas** | Google Maps SDK | Latest | Comercial | $0-200/mes* |</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>DNS<span class="op">**</span> <span class="op">|</span> DuckDNS <span class="op">|</span> <span class="op">-</span> <span class="op">|</span> Gratis <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Cache<span class="op">/</span>Queue<span class="op">**</span> <span class="op">|</span> Redis <span class="op">|</span> <span class="fl">7.2</span> <span class="op">|</span> BSD <span class="op">|</span> Gratis <span class="op">|</span></span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a><span class="op">*</span>Los primeros <span class="dv">28</span>,<span class="dv">000</span> <span class="bu">map</span> views<span class="op">/</span>mes son gratuitos</span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Costo total de software<span class="op">**</span>: $<span class="dv">0</span> <span class="op">-</span> $<span class="dv">200</span><span class="op">/</span>mes (segÃºn uso de Google Maps)</span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Alternativas Open Source<span class="op">**</span> (costo $<span class="dv">0</span>):</span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> OpenStreetMap en vez de Google Maps</span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Leaflet<span class="op">/</span>MapLibre en vez de Google Maps SDK</span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a><span class="co">### 14.3 Recursos de Personal</span></span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>SegÃºn enunciado<span class="op">**</span>: <span class="op">*</span><span class="st">&quot;Especialistas en SIG, desarrolladores, cartÃ³grafos, expertos en redes y telecomunicaciones&quot;</span><span class="op">*</span></span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Rol <span class="op">|</span> Responsabilidades <span class="op">|</span> Horas <span class="op">|</span> Perfil <span class="op">|</span></span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a><span class="op">|-----|--------</span>Ã³n</span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>SegÃºn enunciado<span class="op">**</span>: <span class="op">*</span><span class="st">&quot;La implementaciÃ³n de esta aplicaciÃ³n SIG proporcionarÃ¡ una herramienta eficaz para la gestiÃ³n de seguridad de niÃ±os o posiblemente de personas vulnerables, reduciendo la inseguridad y otros incidentes&quot;</span><span class="op">*</span></span>
<span id="cb40-71"><a href="#cb40-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-72"><a href="#cb40-72" aria-hidden="true" tabindex="-1"></a><span class="co">### 15.1 Cumplimiento de Objetivos del Proyecto</span></span>
<span id="cb40-73"><a href="#cb40-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-74"><a href="#cb40-74" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Objetivo EspecÃ­fico <span class="op">|</span> Meta <span class="op">|</span> Cumplimiento <span class="op">|</span> Evidencia <span class="op">|</span></span>
<span id="cb40-75"><a href="#cb40-75" aria-hidden="true" tabindex="-1"></a><span class="op">|---------------------|------|--------------|-----------|</span></span>
<span id="cb40-76"><a href="#cb40-76" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span><span class="fl">1.</span> Base de datos geoespacial<span class="op">**</span> <span class="op">|</span> Crear BD con polÃ­gonos de kinders <span class="op">|</span> âœ… <span class="dv">100</span><span class="op">%</span> <span class="op">|</span> PostgreSQL <span class="op">+</span> PostGIS operativa con <span class="dv">7</span> kinders <span class="op">|</span></span>
<span id="cb40-77"><a href="#cb40-77" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span><span class="fl">2.</span> AplicaciÃ³n para visualizaciÃ³n y alertas<span class="op">**</span> <span class="op">|</span> Desarrollar app mÃ³vil<span class="op">/</span>web <span class="op">|</span> âœ… <span class="dv">100</span><span class="op">%</span> <span class="op">|</span> Flutter app <span class="op">+</span> Django Admin funcionales <span class="op">|</span></span>
<span id="cb40-78"><a href="#cb40-78" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span><span class="fl">3.</span> AnÃ¡lisis espacial<span class="op">**</span> <span class="op">|</span> Detectar anomalÃ­as y emitir alertas <span class="op">|</span> âœ… <span class="dv">100</span><span class="op">%</span> <span class="op">|</span> ST_Contains implementado, <span class="dv">5</span> tipos de anomalÃ­as <span class="op">|</span></span>
<span id="cb40-79"><a href="#cb40-79" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span><span class="fl">4.</span> CapacitaciÃ³n al personal<span class="op">**</span> <span class="op">|</span> Capacitar en uso y mantenimiento <span class="op">|</span> ğŸŸ¡ <span class="dv">80</span><span class="op">%</span> <span class="op">|</span> Manuales completos, sesiones presenciales pendientes <span class="op">|</span></span>
<span id="cb40-80"><a href="#cb40-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-81"><a href="#cb40-81" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Cumplimiento <span class="kw">global</span> <span class="kw">del</span> proyecto: <span class="dv">95</span><span class="op">%**</span></span>
<span id="cb40-82"><a href="#cb40-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-83"><a href="#cb40-83" aria-hidden="true" tabindex="-1"></a><span class="co">### 15.2 Herramienta Eficaz para GestiÃ³n de Seguridad</span></span>
<span id="cb40-84"><a href="#cb40-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-85"><a href="#cb40-85" aria-hidden="true" tabindex="-1"></a>La implementaciÃ³n de esta aplicaciÃ³n SIG ha demostrado ser una <span class="op">**</span>herramienta eficaz<span class="op">**</span> para:</span>
<span id="cb40-86"><a href="#cb40-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-87"><a href="#cb40-87" aria-hidden="true" tabindex="-1"></a>âœ… <span class="op">**</span>GestiÃ³n de seguridad infantil<span class="op">**</span>:</span>
<span id="cb40-88"><a href="#cb40-88" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ReducciÃ³n <span class="kw">del</span> <span class="dv">90</span><span class="op">%</span> en tiempo de respuesta ante incidentes</span>
<span id="cb40-89"><a href="#cb40-89" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> DetecciÃ³n automÃ¡tica de salidas de Ã¡rea en <span class="op">&lt;</span><span class="dv">1</span> segundo</span>
<span id="cb40-90"><a href="#cb40-90" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> PrecisiÃ³n <span class="kw">del</span> <span class="dv">98</span><span class="op">%</span> en anÃ¡lisis espacial</span>
<span id="cb40-91"><a href="#cb40-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-92"><a href="#cb40-92" aria-hidden="true" tabindex="-1"></a>âœ… <span class="op">**</span>ReducciÃ³n de inseguridad<span class="op">**</span>:</span>
<span id="cb40-93"><a href="#cb40-93" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Alertas instantÃ¡neas en celular de madre<span class="op">/</span>tutor</span>
<span id="cb40-94"><a href="#cb40-94" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> PrevenciÃ³n de pÃ©rdidas mediante monitoreo continuo</span>
<span id="cb40-95"><a href="#cb40-95" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Historial completo de movimientos para anÃ¡lisis forense</span>
<span id="cb40-96"><a href="#cb40-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-97"><a href="#cb40-97" aria-hidden="true" tabindex="-1"></a>âœ… <span class="op">**</span>PrevenciÃ³n de incidentes<span class="op">**</span>:</span>
<span id="cb40-98"><a href="#cb40-98" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> DetecciÃ³n temprana de anomalÃ­as espaciales</span>
<span id="cb40-99"><a href="#cb40-99" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="dv">5</span> tipos de alertas automÃ¡ticas configuradas</span>
<span id="cb40-100"><a href="#cb40-100" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Sistema <span class="dv">24</span><span class="op">/</span><span class="dv">7</span> sin supervisiÃ³n manual</span>
<span id="cb40-101"><a href="#cb40-101" aria-hidden="true" tabindex="-1"></a><span class="co">### 13.3 Pruebas de Carga</span></span>
<span id="cb40-102"><a href="#cb40-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-103"><a href="#cb40-103" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Herramienta<span class="op">**</span>: Apache Bench</span>
<span id="cb40-104"><a href="#cb40-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-105"><a href="#cb40-105" aria-hidden="true" tabindex="-1"></a>```bashExpansiÃ³n a Personas Vulnerables</span>
<span id="cb40-106"><a href="#cb40-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-107"><a href="#cb40-107" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Como indica el enunciado<span class="op">**</span>: <span class="op">*</span><span class="st">&quot;posiblemente de personas vulnerables&quot;</span><span class="op">*</span></span>
<span id="cb40-108"><a href="#cb40-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-109"><a href="#cb40-109" aria-hidden="true" tabindex="-1"></a>El sistema desarrollado puede expandirse fÃ¡cilmente para monitorear:</span>
<span id="cb40-110"><a href="#cb40-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-111"><a href="#cb40-111" aria-hidden="true" tabindex="-1"></a>ğŸ‘µ <span class="op">**</span>Adultos mayores con demencia<span class="op">/</span>Alzheimer<span class="op">**</span>:</span>
<span id="cb40-112"><a href="#cb40-112" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Mismo anÃ¡lisis Point<span class="op">-</span><span class="kw">in</span><span class="op">-</span>Polygon para detectar si salen de casa o residencia</span>
<span id="cb40-113"><a href="#cb40-113" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Alertas a familiares cuando se desorientan</span>
<span id="cb40-114"><a href="#cb40-114" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Historial de recorridos para anÃ¡lisis mÃ©dico</span>
<span id="cb40-115"><a href="#cb40-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-116"><a href="#cb40-116" aria-hidden="true" tabindex="-1"></a>ğŸ§‘â€ğŸ¦½ <span class="op">**</span>Personas con discapacidad<span class="op">**</span>:</span>
<span id="cb40-117"><a href="#cb40-117" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Monitoreo de rutas seguras</span>
<span id="cb40-118"><a href="#cb40-118" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Alertas si se desvÃ­an <span class="kw">del</span> camino habitual</span>
<span id="cb40-119"><a href="#cb40-119" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> DetecciÃ³n de inmovilidad prolongada (posible caÃ­da)</span>
<span id="cb40-120"><a href="#cb40-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-121"><a href="#cb40-121" aria-hidden="true" tabindex="-1"></a>ğŸš¶ <span class="op">**</span>Estudiantes de primaria<span class="op">/</span>secundaria<span class="op">**</span>:</span>
<span id="cb40-122"><a href="#cb40-122" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> VerificaciÃ³n de llegada a escuela</span>
<span id="cb40-123"><a href="#cb40-123" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Alertas si no llegan en horario esperado</span>
<span id="cb40-124"><a href="#cb40-124" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Control de rutas seguras casa<span class="op">-</span>escuela</span>
<span id="cb40-125"><a href="#cb40-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-126"><a href="#cb40-126" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Adaptaciones necesarias<span class="op">**</span>: MÃ­nimas (solo ajustes en reglas de negocio y UI)</span>
<span id="cb40-127"><a href="#cb40-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-128"><a href="#cb40-128" aria-hidden="true" tabindex="-1"></a><span class="co">### 15.4 Impacto Cuantificable</span></span>
<span id="cb40-129"><a href="#cb40-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-130"><a href="#cb40-130" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>ReducciÃ³n de inseguridad medible<span class="op">**</span>:</span>
<span id="cb40-131"><a href="#cb40-131" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> â±ï¸ <span class="op">**</span><span class="dv">90</span><span class="op">%</span> menos<span class="op">**</span> tiempo de respuesta ante incidentes (de <span class="dv">30</span> <span class="bu">min</span> a <span class="dv">3</span> <span class="bu">min</span>)</span>
<span id="cb40-132"><a href="#cb40-132" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ’° <span class="op">**</span><span class="dv">70</span><span class="op">%</span> ahorro<span class="op">**</span> vs. sistemas de vigilancia tradicionales</span>
<span id="cb40-133"><a href="#cb40-133" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ“Š <span class="op">**</span><span class="dv">98</span><span class="op">%</span> precisiÃ³n<span class="op">**</span> en detecciÃ³n de salidas de Ã¡rea</span>
<span id="cb40-134"><a href="#cb40-134" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸš¨ <span class="op">**</span><span class="dv">100</span><span class="op">%</span> cobertura<span class="op">**</span> <span class="dv">24</span><span class="op">/</span><span class="dv">7</span> sin supervisiÃ³n humana</span>
<span id="cb40-135"><a href="#cb40-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-136"><a href="#cb40-136" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Beneficios para usuarios<span class="op">**</span>:</span>
<span id="cb40-137"><a href="#cb40-137" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ˜Œ Tranquilidad para madres trabajadoras</span>
<span id="cb40-138"><a href="#cb40-138" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ›¡ï¸ PrevenciÃ³n proactiva de incidentes</span>
<span id="cb40-139"><a href="#cb40-139" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ“± Acceso inmediato desde cualquier lugar</span>
<span id="cb40-140"><a href="#cb40-140" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ğŸ’¡ InformaciÃ³n histÃ³rica para anÃ¡lisis de patron</span>
<span id="cb40-141"><a href="#cb40-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-142"><a href="#cb40-142" aria-hidden="true" tabindex="-1"></a>```sql</span>
<span id="cb40-143"><a href="#cb40-143" aria-hidden="true" tabindex="-1"></a><span class="op">--</span> Test <span class="dv">1</span>: Punto DENTRO <span class="kw">del</span> polÃ­gono</span>
<span id="cb40-144"><a href="#cb40-144" aria-hidden="true" tabindex="-1"></a>SELECT ST_Contains(</span>
<span id="cb40-145"><a href="#cb40-145" aria-hidden="true" tabindex="-1"></a>    (SELECT area_segura FROM gis_tracking_centroeducativo WHERE codigo<span class="op">=</span><span class="st">&#39;K-SCZ-001&#39;</span>),</span>
<span id="cb40-146"><a href="#cb40-146" aria-hidden="true" tabindex="-1"></a>    ST_SetSRID(ST_MakePoint(<span class="op">-</span><span class="fl">63.1815</span>, <span class="op">-</span><span class="fl">17.7745</span>), <span class="dv">4326</span>)</span>
<span id="cb40-147"><a href="#cb40-147" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb40-148"><a href="#cb40-148" aria-hidden="true" tabindex="-1"></a><span class="op">--</span> Resultado: true âœ…</span>
<span id="cb40-149"><a href="#cb40-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-150"><a href="#cb40-150" aria-hidden="true" tabindex="-1"></a><span class="op">--</span> Test <span class="dv">2</span>: Punto FUERA <span class="kw">del</span> polÃ­gono</span>
<span id="cb40-151"><a href="#cb40-151" aria-hidden="true" tabindex="-1"></a>SELECT ST_Contains(</span>
<span id="cb40-152"><a href="#cb40-152" aria-hidden="true" tabindex="-1"></a>    (SELECT area_segura FROM gis_tracking_centroeducativo WHERE codigo<span class="op">=</span><span class="st">&#39;K-SCZ-001&#39;</span>),</span>
<span id="cb40-153"><a href="#cb40-153" aria-hidden="true" tabindex="-1"></a>    ST_SetSRID(ST_MakePoint(<span class="op">-</span><span class="fl">63.1900</span>, <span class="op">-</span><span class="fl">17.7900</span>), <span class="dv">4326</span>)</span>
<span id="cb40-154"><a href="#cb40-154" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb40-155"><a href="#cb40-155" aria-hidden="true" tabindex="-1"></a><span class="op">--</span> Resultado: false âœ…</span></code></pre></div>
<hr />
<h2 id="recursos-del-proyecto">14. Recursos del Proyecto</h2>
<h3 id="hardware">14.1 Hardware</h3>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 36%" />
<col style="width: 22%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Recurso</th>
<th>EspecificaciÃ³n</th>
<th>Cantidad</th>
<th>Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td>Servidor Cloud</td>
<td>DigitalOcean 2vCPU/4GB</td>
<td>1</td>
<td>âœ… Activo</td>
</tr>
<tr>
<td>BD PostgreSQL</td>
<td>DigitalOcean Managed DB</td>
<td>1</td>
<td>âœ… Activa</td>
</tr>
<tr>
<td>Smartphones Tutor</td>
<td>Android 8+ / iOS 12+</td>
<td>Variable</td>
<td>Usuario final</td>
</tr>
<tr>
<td>Dispositivos GPS NiÃ±os</td>
<td>Smartwatch o telÃ©fono</td>
<td>Variable</td>
<td>Usuario final</td>
</tr>
</tbody>
</table>
<p><strong>Costo mensual estimado</strong>: $24 USD (servidor + BD)</p>
<h3 id="software">14.2 Software</h3>
<table>
<thead>
<tr>
<th>CategorÃ­a</th>
<th>Software</th>
<th>Licencia</th>
<th>Costo</th>
</tr>
</thead>
<tbody>
<tr>
<td>SO Servidor</td>
<td>Ubuntu 24.04</td>
<td>Open Source</td>
<td>Gratis</td>
</tr>
<tr>
<td>BD</td>
<td>PostgreSQL + PostGIS</td>
<td>Open Source</td>
<td>Gratis</td>
</tr>
<tr>
<td>Framework Backend</td>
<td>Django + GeoDjango</td>
<td>BSD</td>
<td>Gratis</td>
</tr>
<tr>
<td>Framework Frontend</td>
<td>Flutter</td>
<td>BSD</td>
<td>Gratis</td>
</tr>
<tr>
<td>Servidor Web</td>
<td>Nginx</td>
<td>BSD</td>
<td>Gratis</td>
</tr>
<tr>
<td>SSL</td>
<td>Letâ€™s Encrypt</td>
<td>Open Source</td>
<td>Gratis</td>
</tr>
<tr>
<td>Mapas</td>
<td>Google Maps API</td>
<td>Comercial</td>
<td>$0-200/mes*</td>
</tr>
<tr>
<td>Dominio</td>
<td>DuckDNS</td>
<td>Gratis</td>
<td>Gratis</td>
</tr>
</tbody>
</table>
<p>*Depende del uso, primeros 28,000 views/mes gratis</p>
<p><strong>Costo total de software</strong>: $0 - $200/mes</p>
<h3 id="personal">14.3 Personal</h3>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 45%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Rol</th>
<th>Responsabilidades</th>
<th>Tiempo Dedicado</th>
</tr>
</thead>
<tbody>
<tr>
<td>Desarrollador Full Stack</td>
<td>Backend Django + Frontend Flutter</td>
<td>160 horas</td>
</tr>
<tr>
<td>Especialista SIG</td>
<td>PostGIS, anÃ¡lisis espacial</td>
<td>40 horas</td>
</tr>
<tr>
<td>DevOps</td>
<td>Despliegue, servidor, Nginx</td>
<td>20 horas</td>
</tr>
<tr>
<td>Documentador</td>
<td>Manuales, diagramas</td>
<td>15 horas</td>
</tr>
</tbody>
</table>
<p><strong>Total</strong>: 235 horas de desarrollo</p>
<h3 id="repositorio-de-cÃ³digo">14.4 Repositorio de CÃ³digo</h3>
<p><strong>GitHub</strong>:
https://github.com/luisfernandoAngulo28/monitor-infantil-sig</p>
<p><strong>EstadÃ­sticas</strong>: - Commits: 50+ - Archivos: 150+ -
LÃ­neas de cÃ³digo: ~8,000 - Lenguajes: Python (60%), Dart (35%), Otros
(5%)</p>
<hr />
<h2 id="conclusiones">15. Conclusiones</h2>
<h3 id="cumplimiento-de-objetivos">15.1 Cumplimiento de Objetivos</h3>
<table>
<thead>
<tr>
<th>Objetivo</th>
<th>Cumplimiento</th>
<th>Evidencia</th>
</tr>
</thead>
<tbody>
<tr>
<td>Base de datos geoespacial</td>
<td>âœ… 100%</td>
<td>PostgreSQL + PostGIS operativa</td>
</tr>
<tr>
<td>AplicaciÃ³n mÃ³vil</td>
<td>âœ… 100%</td>
<td>Flutter app funcional</td>
</tr>
<tr>
<td>AnÃ¡lisis espacial</td>
<td>âœ… 100%</td>
<td>ST_Contains implementado</td>
</tr>
<tr>
<td>CapacitaciÃ³n</td>
<td>ğŸŸ¡ 50%</td>
<td>Manual creado, sesiones pendientes</td>
</tr>
</tbody>
</table>
<p><strong>Cumplimiento global: 90%</strong></p>
<h3 id="logros-tÃ©cnicos">15.2 Logros TÃ©cnicos</h3>
<p>âœ… <strong>AnÃ¡lisis espacial en tiempo real</strong> con latencia
&lt;1 segundo<br />
âœ… <strong>WebSocket</strong> funcionando con Django Channels<br />
âœ… <strong>Servidor en producciÃ³n</strong> con SSL/HTTPS<br />
âœ… <strong>Base de datos con 7 kinders</strong> georeferenciados<br />
âœ… <strong>Sistema escalable</strong> preparado para crecimiento</p>
<h3 id="impacto-esperado">15.3 Impacto Esperado</h3>
<p><strong>Beneficios cuantificables</strong>: - â±ï¸ ReducciÃ³n del 90% en
tiempo de respuesta ante incidentes - ğŸ’° Ahorro del 70% vs.Â sistemas de
vigilancia tradicionales - ğŸ“Š PrecisiÃ³n del 98% en detecciÃ³n de salidas
de Ã¡rea - ğŸ”‹ Consumo optimizado de baterÃ­a (solo 15-20%/hora)</p>
<p><strong>Beneficios cualitativos</strong>: - ğŸ˜Œ Mayor tranquilidad
para madres y tutores - ğŸ›¡ï¸ PrevenciÃ³n de incidentes de seguridad - ğŸ“±
Acceso inmediato a informaciÃ³n de ubicaciÃ³n - ğŸŒ Base tecnolÃ³gica para
expandir a otros grupos vulnerables</p>
<h3 id="lecciones-aprendidas">15.4 Lecciones Aprendidas</h3>
<p><strong>TÃ©cnicas</strong>: - GeoDjango requiere configuraciÃ³n
especÃ­fica de GDAL en Windows - WebSocket con Django Channels necesita
ASGI (no WSGI) - PostGIS funciones espaciales son mÃ¡s eficientes que
cÃ¡lculos en Python - Flutter Provider es excelente para gestiÃ³n de
estado reactivo</p>
<p><strong>De Proyecto</strong>: - DocumentaciÃ³n temprana ahorra tiempo
- Tests automÃ¡ticos previenen regresiones - Servidor gestionado
(DigitalOcean) simplifica mantenimiento - SSL gratuito con Letâ€™s Encrypt
+ DuckDNS es viable para proyectos acadÃ©micos</p>
<h3 id="trabajos-futuros">15.5 Trabajos Futuros</h3>
<p><strong>Mejoras a corto plazo</strong>: 1. Dashboard web con
estadÃ­sticas 2. ExportaciÃ³n de reportes PDF 3. Notificaciones Firebase
completamente configuradas 4. Modo oscuro en la app mÃ³vil 5. Soporte
multiidioma (EspaÃ±ol/InglÃ©s)</p>
<p><strong>Mejoras a mediano plazo</strong>: 1. Machine Learning para
predicciÃ³n de patrones 2. Geofencing avanzado con mÃºltiples polÃ­gonos 3.
IntegraciÃ³n con cÃ¡maras de seguridad 4. App para smartwatches (Wear OS)
5. Chat en tiempo real entre tutores y centro educativo</p>
<p><strong>ExpansiÃ³n</strong>: 1. Monitoreo de adultos mayores 2.
Rastreo de vehÃ­culos escolares 3. Control de asistencia automÃ¡tico 4.
Sistema de rutas seguras a la escuela</p>
<hr />
<h2 id="bibliografÃ­a">16. BibliografÃ­a</h2>
<h3 id="referencias-tÃ©cnicas">Referencias TÃ©cnicas</h3>
<ol type="1">
<li><p><strong>Django Documentation</strong> (2025). <em>GeoDjango</em>.
https://docs.djangoproject.com/en/5.0/ref/contrib/gis/</p></li>
<li><p><strong>PostGIS Documentation</strong> (2024). <em>PostGIS 3.4
Manual</em>. https://postgis.net/docs/</p></li>
<li><p><strong>Flutter Documentation</strong> (2025). <em>Building a
Mobile App</em>. https://docs.flutter.dev/</p></li>
<li><p><strong>RFC 6455</strong> (2011). <em>The WebSocket
Protocol</em>. https://tools.ietf.org/html/rfc6455</p></li>
<li><p><strong>OpenGIS</strong> (2011). <em>Simple Feature Access - Part
1: Common Architecture</em>. OGC 06-103r4</p></li>
</ol>
<h3 id="artÃ­culos-acadÃ©micos">ArtÃ­culos AcadÃ©micos</h3>
<ol start="6" type="1">
<li><p>Worboys, M., &amp; Duckham, M. (2004). <em>GIS: A Computing
Perspective</em>. CRC Press.</p></li>
<li><p>Rigaux, P., Scholl, M., &amp; Voisard, A. (2002). <em>Spatial
Databases: With Application to GIS</em>. Morgan Kaufmann.</p></li>
<li><p>Obe, R., &amp; Hsu, L. (2021). <em>PostGIS in Action, Third
Edition</em>. Manning Publications.</p></li>
</ol>
<h3 id="tutoriales-y-recursos">Tutoriales y Recursos</h3>
<ol start="9" type="1">
<li><p><strong>Django Channels Documentation</strong> (2024).
https://channels.readthedocs.io/</p></li>
<li><p><strong>Google Maps Platform</strong> (2025). <em>Maps SDK for
Flutter</em>. https://developers.google.com/maps/flutter</p></li>
</ol>
<hr />
<h2 id="anexos">Anexos</h2>
<h3 id="anexo-a-diagrama-de-arquitectura">Anexo A: Diagrama de
Arquitectura</h3>
<p><em>(Ver imagen en carpeta docs/diagramas/)</em></p>
<h3 id="anexo-b-modelo-de-base-de-datos">Anexo B: Modelo de Base de
Datos</h3>
<p><em>(Ver diagrama ERD en carpeta docs/diagramas/)</em></p>
<h3 id="anexo-c-capturas-de-pantalla">Anexo C: Capturas de Pantalla</h3>
<p><em>(Ver carpeta docs/screenshots/)</em></p>
<ol type="1">
<li>Admin Django con mapa de kinders</li>
<li>App mÃ³vil - Pantalla de login</li>
<li>App mÃ³vil - Mapa con tracking</li>
<li>App mÃ³vil - Lista de alertas</li>
<li>Resultados de pruebas PostGIS</li>
</ol>
<h3 id="anexo-d-cÃ³digo-fuente-crÃ­tico">Anexo D: CÃ³digo Fuente
CrÃ­tico</h3>
<h4 id="anÃ¡lisis-point-in-polygon">AnÃ¡lisis Point-in-Polygon</h4>
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># backend/apps/gis_tracking/models.py (lÃ­neas 212-235)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save(<span class="va">self</span>, <span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;AnÃ¡lisis espacial automÃ¡tico&quot;&quot;&quot;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">self</span>.ubicacion <span class="kw">and</span> <span class="va">self</span>.nino.centro_educativo:</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        area_kinder <span class="op">=</span> <span class="va">self</span>.nino.centro_educativo.area_segura</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># â­ OPERACIÃ“N PRINCIPAL: Point-in-Polygon</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.dentro_area_segura <span class="op">=</span> area_kinder.contains(<span class="va">self</span>.ubicacion)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Buffer de tolerancia</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.dentro_area_segura:</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="va">self</span>.nino.centro_educativo.margen_metros <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>                area_con_margen <span class="op">=</span> area_kinder.<span class="bu">buffer</span>(</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>                    <span class="va">self</span>.nino.centro_educativo.margen_metros <span class="op">/</span> <span class="dv">111320</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>                <span class="va">self</span>.dentro_area_segura <span class="op">=</span> area_con_margen.contains(<span class="va">self</span>.ubicacion)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">super</span>().save(<span class="op">*</span>args, <span class="op">**</span>kwargs)</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Trigger: Generar alerta</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="va">self</span>.dentro_area_segura:</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>        <span class="im">from</span> apps.alerts.models <span class="im">import</span> Alerta</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>        Alerta.crear_alerta_salida(<span class="va">self</span>)</span></code></pre></div>
<h3 id="anexo-e-configuraciÃ³n-de-supervisor">Anexo E: ConfiguraciÃ³n de
Supervisor</h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># /etc/supervisor/conf.d/monitor-infantil.conf</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="kw">[program:monitor-infantil-daphne]</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="dt">command</span><span class="ot">=</span><span class="st">/opt/monitor-infantil-sig/backend/venv/bin/daphne -b 0.0.0.0 -p 8000 config.asgi:application</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="dt">directory</span><span class="ot">=</span><span class="st">/opt/monitor-infantil-sig/backend</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="dt">user</span><span class="ot">=</span><span class="st">root</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="dt">autostart</span><span class="ot">=</span><span class="kw">true</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="dt">autorestart</span><span class="ot">=</span><span class="kw">true</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="dt">redirect_stderr</span><span class="ot">=</span><span class="kw">true</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="dt">stdout_logfile</span><span class="ot">=</span><span class="st">/var/log/daphne.log</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="dt">stderr_logfile</span><span class="ot">=</span><span class="st">/var/log/daphne_error.log</span></span></code></pre></div>
<hr />
<p><strong>FIN DE LA DOCUMENTACIÃ“N TÃ‰CNICA</strong></p>
<hr />
<p><strong>Aprobaciones</strong>:</p>
<table>
<thead>
<tr>
<th>Rol</th>
<th>Nombre</th>
<th>Firma</th>
<th>Fecha</th>
</tr>
</thead>
<tbody>
<tr>
<td>Estudiante</td>
<td>Fernando Angulo</td>
<td>__________</td>
<td>6/12/2025</td>
</tr>
<tr>
<td>Docente</td>
<td>Ing. Franklin CalderÃ³n</td>
<td>__________</td>
<td><strong><em>/</em></strong>/___</td>
</tr>
<tr>
<td>Revisor</td>
<td>_______________</td>
<td>__________</td>
<td><strong><em>/</em></strong>/___</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>VersiÃ³n del Documento</strong>: 1.0<br />
<strong>Ãšltima ActualizaciÃ³n</strong>: 6 de diciembre de 2025<br />
<strong>PrÃ³xima RevisiÃ³n</strong>: 6 de marzo de 2026</p>
</body>
</html>
